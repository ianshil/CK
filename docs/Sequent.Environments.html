<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/ianshil/CK">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Sequent.Environments</h1>

<div class="code">
</div>

<div class="doc">
<a id="lab1"></a><h1 class="section">Environments</h1>


<div class="paragraph"> </div>

  An environment is a multiset of formulas. We rely on stdpp multisets
  mostly for their powerful multiset equivalence tactic.
<div class="paragraph"> </div>

 Notion of wellfoundedness 
</div>
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Program.Wf</span>.<br/>

<br/>
</div>

<div class="doc">
Stdpp implementation of multisets 
</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">stdpp.gmultiset</span>.<br/>

<br/>
</div>

<div class="doc">
Our propositional formulas, including their countability. 
</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="Syntax.im_syntax.html#"><span class="id" title="library">im_syntax</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="Sequent.syntax_facts.html#"><span class="id" title="library">syntax_facts</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Program.Equality</span>.<br/>

<br/>
</div>

<div class="doc">
An environment is defined as a finite multiset of formulas
(in the sense of the stdpp library).
This requires decidable equality and countability of the underlying set. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="env" class="idref" href="#env"><span class="id" title="definition">env</span></a>  := @<span class="id" title="record">gmultiset</span> <a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="Sequent.syntax_facts.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> <a class="idref" href="Sequent.syntax_facts.html#form_count"><span class="id" title="instance">form_count</span></a>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="singleton" class="idref" href="#singleton"><span class="id" title="instance">singleton</span></a>  : <span class="id" title="class">Singleton</span> <a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a> := <span class="id" title="instance">gmultiset_singleton</span>.<br/>
<span class="id" title="keyword">Global Instance</span> <a id="singletonMS" class="idref" href="#singletonMS"><span class="id" title="instance">singletonMS</span></a>  : <span class="id" title="class">SingletonMS</span> <a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a> := <span class="id" title="definition">base.singleton</span>.<br/>

<br/>
<span class="id" title="keyword">Global Hint Unfold</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Nat.html#mul"><span class="id" title="definition">mult</span></a> <span class="id" title="definition">empty</span> <a class="idref" href="Sequent.Environments.html#singleton"><span class="id" title="instance">singleton</span></a> <span class="id" title="definition">union</span> <span class="id" title="definition">intersection</span> <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a> : <span class="id" title="var">mset</span>.<br/>
<span class="comment">(*&nbsp;useful&nbsp;notations&nbsp;:<br/>
&nbsp;&nbsp;{<span class="inlinecode"></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"></span>}&nbsp;:&nbsp;singleton<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⊎&nbsp;:&nbsp;disjoint&nbsp;union<br/>
&nbsp;&nbsp;&nbsp;\:&nbsp;difference&nbsp;(setminus)<br/>
&nbsp;&nbsp;&nbsp;{<span class="inlinecode"></span> <span class="inlinecode"><span class="id" title="var">x</span>;</span> <span class="inlinecode"><span class="id" title="var">y</span>;</span> <span class="inlinecode">…</span> <span class="inlinecode"></span>}&nbsp;union&nbsp;of&nbsp;singletons<br/>
&nbsp;&nbsp;&nbsp;<span class="inlinecode">{[+</span> <span class="inlinecode"><span class="id" title="var">x</span>;</span> <span class="inlinecode"><span class="id" title="var">y</span>;</span> <span class="inlinecode">…</span> <span class="inlinecode">+]}</span>&nbsp;*disjoint*&nbsp;union&nbsp;of&nbsp;singletons<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⊂@&nbsp;:&nbsp;include<br/>
*)</span><br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="empty" class="idref" href="#empty"><span class="id" title="definition">empty</span></a>  := <span class="id" title="notation">∅</span> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">ms</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">base.singletonMS</span>, <a class="idref" href="Sequent.Environments.html#singletonMS"><span class="id" title="instance">singletonMS</span></a>, <span class="id" title="definition">base.empty</span>, <span class="id" title="instance">gmultiset_empty</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;<span class="id" title="var">autounfold</span> <span class="id" title="keyword">with</span> <span class="id" title="var">mset</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">autounfold</span> <span class="id" title="keyword">with</span> <span class="id" title="var">mset</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">gmultiset_elem_of_disj_union</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">tauto</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">multiset_solver</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="71ca1960dd16f5a2fd2bf72245ca13b9" class="idref" href="#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">&quot;</span></a>Γ • φ" := (<span class="id" title="definition">disj_union</span> <span class="id" title="var">Γ</span> (<span class="id" title="definition">base.singletonMS</span> φ)) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 105, φ <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 85, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="GeneralEnvironments" class="idref" href="#GeneralEnvironments"><span class="id" title="section">GeneralEnvironments</span></a>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="proper_elem_of" class="idref" href="#proper_elem_of"><span class="id" title="instance">proper_elem_of</span></a> : <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="notation">(=)</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="notation">(≡@{</span><a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <a id="x:1" class="idref" href="#x:1"><span class="id" title="binder">x</span></a> <a id="y:2" class="idref" href="#y:2"><span class="id" title="binder">y</span></a> =&gt; <a class="idref" href="Sequent.Environments.html#x:1"><span class="id" title="variable">x</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#y:2"><span class="id" title="variable">y</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a>) <span class="id" title="definition">elem_of</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">Γ'</span> <span class="id" title="var">Heq</span> φ φ' <span class="id" title="var">Heq'</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="proper_disj_union" class="idref" href="#proper_disj_union"><span class="id" title="instance">proper_disj_union</span></a> : <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="notation">(≡@{</span><a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="notation">(≡@{</span><a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="notation">(≡@{</span><a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span>) <span class="id" title="definition">disj_union</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">Γ'</span> <span class="id" title="var">Heq</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Δ'</span> <span class="id" title="var">Heq'</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="elements_env_add" class="idref" href="#elements_env_add"><span class="id" title="lemma">elements_env_add</span></a> (<a id="55485d85e29df2faa6748490a2d4cd13" class="idref" href="#55485d85e29df2faa6748490a2d4cd13"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="6d99d4a7cb908e141b2f4c9b66be9fba" class="idref" href="#6d99d4a7cb908e141b2f4c9b66be9fba"><span class="id" title="binder">φ</span></a> : <span class="id" title="definition">elements</span>(<a class="idref" href="Sequent.Environments.html#55485d85e29df2faa6748490a2d4cd13"><span class="id" title="variable">Γ</span></a> <a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="Sequent.Environments.html#6d99d4a7cb908e141b2f4c9b66be9fba"><span class="id" title="variable">φ</span></a>) <span class="id" title="notation">≡ₚ</span> <a class="idref" href="Sequent.Environments.html#6d99d4a7cb908e141b2f4c9b66be9fba"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="definition">elements</span> <a class="idref" href="Sequent.Environments.html#55485d85e29df2faa6748490a2d4cd13"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">setoid_rewrite</span> (<span class="id" title="lemma">gmultiset_elements_disj_union</span> <span class="id" title="var">Γ</span>).<br/>
<span class="id" title="tactic">setoid_rewrite</span> (<span class="id" title="lemma">gmultiset_elements_singleton</span> φ).<br/>
<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Permutation_cons_append</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab2"></a><h2 class="section">Multiset utilities</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="multeq_meq" class="idref" href="#multeq_meq"><span class="id" title="lemma">multeq_meq</span></a> (<a id="M:5" class="idref" href="#M:5"><span class="id" title="binder">M</span></a> <a id="N:6" class="idref" href="#N:6"><span class="id" title="binder">N</span></a>: <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) : <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="x:7" class="idref" href="#x:7"><span class="id" title="binder">x</span></a><span class="id" title="notation">,</span> <span class="id" title="definition">multiplicity</span> <a class="idref" href="Sequent.Environments.html#x:7"><span class="id" title="variable">x</span></a> <a class="idref" href="Sequent.Environments.html#M:5"><span class="id" title="variable">M</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">multiplicity</span> <a class="idref" href="Sequent.Environments.html#x:7"><span class="id" title="variable">x</span></a> <a class="idref" href="Sequent.Environments.html#N:6"><span class="id" title="variable">N</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#M:5"><span class="id" title="variable">M</span></a> <span class="id" title="notation">≡</span>  <a class="idref" href="Sequent.Environments.html#N:6"><span class="id" title="variable">N</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">multiset_solver</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="diff_mult" class="idref" href="#diff_mult"><span class="id" title="lemma">diff_mult</span></a> (<a id="M:8" class="idref" href="#M:8"><span class="id" title="binder">M</span></a> <a id="N:9" class="idref" href="#N:9"><span class="id" title="binder">N</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="x:10" class="idref" href="#x:10"><span class="id" title="binder">x</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="definition">multiplicity</span> <a class="idref" href="Sequent.Environments.html#x:10"><span class="id" title="variable">x</span></a> (<a class="idref" href="Sequent.Environments.html#M:8"><span class="id" title="variable">M</span></a> <span class="id" title="notation">∖</span> <a class="idref" href="Sequent.Environments.html#N:9"><span class="id" title="variable">N</span></a>) <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (<span class="id" title="definition">multiplicity</span> <a class="idref" href="Sequent.Environments.html#x:10"><span class="id" title="variable">x</span></a> <a class="idref" href="Sequent.Environments.html#M:8"><span class="id" title="variable">M</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="definition">multiplicity</span> <a class="idref" href="Sequent.Environments.html#x:10"><span class="id" title="variable">x</span></a> <a class="idref" href="Sequent.Environments.html#N:9"><span class="id" title="variable">N</span></a>)%<span class="id" title="var">nat</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">multiplicity_difference</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="union_mult" class="idref" href="#union_mult"><span class="id" title="lemma">union_mult</span></a> (<a id="M:11" class="idref" href="#M:11"><span class="id" title="binder">M</span></a> <a id="N:12" class="idref" href="#N:12"><span class="id" title="binder">N</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="x:13" class="idref" href="#x:13"><span class="id" title="binder">x</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="definition">multiplicity</span> <a class="idref" href="Sequent.Environments.html#x:13"><span class="id" title="variable">x</span></a> (<a class="idref" href="Sequent.Environments.html#M:11"><span class="id" title="variable">M</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="Sequent.Environments.html#N:12"><span class="id" title="variable">N</span></a>) <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (<span class="id" title="definition">multiplicity</span> <a class="idref" href="Sequent.Environments.html#x:13"><span class="id" title="variable">x</span></a> <a class="idref" href="Sequent.Environments.html#M:11"><span class="id" title="variable">M</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="definition">multiplicity</span> <a class="idref" href="Sequent.Environments.html#x:13"><span class="id" title="variable">x</span></a> <a class="idref" href="Sequent.Environments.html#N:12"><span class="id" title="variable">N</span></a>)%<span class="id" title="var">nat</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">multiplicity_disj_union</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="singleton_mult_in" class="idref" href="#singleton_mult_in"><span class="id" title="lemma">singleton_mult_in</span></a> <a id="x:14" class="idref" href="#x:14"><span class="id" title="binder">x</span></a> <a id="y:15" class="idref" href="#y:15"><span class="id" title="binder">y</span></a>: <a class="idref" href="Sequent.Environments.html#x:14"><span class="id" title="variable">x</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Sequent.Environments.html#y:15"><span class="id" title="variable">y</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="definition">multiplicity</span> <a class="idref" href="Sequent.Environments.html#x:14"><span class="id" title="variable">x</span></a> <span class="id" title="notation">{[+</span> <a class="idref" href="Sequent.Environments.html#y:15"><span class="id" title="variable">y</span></a> <span class="id" title="notation">+]}</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 1.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">multiplicity_singleton</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="singleton_mult_notin" class="idref" href="#singleton_mult_notin"><span class="id" title="lemma">singleton_mult_notin</span></a> <a id="x:16" class="idref" href="#x:16"><span class="id" title="binder">x</span></a> <a id="y:17" class="idref" href="#y:17"><span class="id" title="binder">y</span></a>: <a class="idref" href="Sequent.Environments.html#x:16"><span class="id" title="variable">x</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="Sequent.Environments.html#y:17"><span class="id" title="variable">y</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="definition">multiplicity</span> <a class="idref" href="Sequent.Environments.html#x:16"><span class="id" title="variable">x</span></a> <span class="id" title="notation">{[</span><a class="idref" href="Sequent.Environments.html#y:17"><span class="id" title="variable">y</span></a><span class="id" title="notation">]}</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">multiplicity_singleton_ne</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Two&nbsp;useful&nbsp;basic&nbsp;facts&nbsp;about&nbsp;multisets&nbsp;containing&nbsp;(or&nbsp;not)&nbsp;certain&nbsp;elements.&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="env_replace" class="idref" href="#env_replace"><span class="id" title="lemma">env_replace</span></a> {<a id="f0fc26962fbc1476a5f5245f565ffb72" class="idref" href="#f0fc26962fbc1476a5f5245f565ffb72"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>} <a id="811db5421995400350703bd290e285cb" class="idref" href="#811db5421995400350703bd290e285cb"><span class="id" title="binder">φ</span></a> {<a id="f33024492691f4a5a4026067e3f41e5d" class="idref" href="#f33024492691f4a5a4026067e3f41e5d"><span class="id" title="binder">ψ</span></a>}:<br/>
&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#f33024492691f4a5a4026067e3f41e5d"><span class="id" title="variable">ψ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#f0fc26962fbc1476a5f5245f565ffb72"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">(</span><a class="idref" href="Sequent.Environments.html#f0fc26962fbc1476a5f5245f565ffb72"><span class="id" title="variable">Γ</span></a> <a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="Sequent.Environments.html#811db5421995400350703bd290e285cb"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="Sequent.Environments.html#f33024492691f4a5a4026067e3f41e5d"><span class="id" title="variable">ψ</span></a><span class="id" title="notation">]}</span> <span class="id" title="notation">≡</span> <span class="id" title="notation">(</span><a class="idref" href="Sequent.Environments.html#f0fc26962fbc1476a5f5245f565ffb72"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="Sequent.Environments.html#f33024492691f4a5a4026067e3f41e5d"><span class="id" title="variable">ψ</span></a><span class="id" title="notation">]}</span> <a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="Sequent.Environments.html#811db5421995400350703bd290e285cb"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Sequent.Environments.html#multeq_meq"><span class="id" title="lemma">multeq_meq</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">θ</span>.<br/>
<span class="id" title="tactic">rewrite</span> <a class="idref" href="Sequent.Environments.html#diff_mult"><span class="id" title="lemma">diff_mult</span></a>, <a class="idref" href="Sequent.Environments.html#union_mult"><span class="id" title="lemma">union_mult</span></a>, <a class="idref" href="Sequent.Environments.html#union_mult"><span class="id" title="lemma">union_mult</span></a>, <a class="idref" href="Sequent.Environments.html#diff_mult"><span class="id" title="lemma">diff_mult</span></a>.<br/>
<span class="id" title="tactic">apply</span> <span class="id" title="lemma">PeanoNat.Nat.add_sub_swap</span>.<br/>
<span class="id" title="tactic">case</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">θ</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ψ)); <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">subst</span>.<br/>
- <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Sequent.Environments.html#singleton_mult_in"><span class="id" title="lemma">singleton_mult_in</span></a>.<br/>
- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Sequent.Environments.html#singleton_mult_notin"><span class="id" title="lemma">singleton_mult_notin</span></a>; <span class="id" title="tactic">trivial</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="diff_not_in" class="idref" href="#diff_not_in"><span class="id" title="lemma">diff_not_in</span></a> (<a id="57d703d05664bc6befa1a1f25e729927" class="idref" href="#57d703d05664bc6befa1a1f25e729927"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="2d294d8281a611996e28d18383d65b76" class="idref" href="#2d294d8281a611996e28d18383d65b76"><span class="id" title="binder">φ</span></a> : <a class="idref" href="Sequent.Environments.html#2d294d8281a611996e28d18383d65b76"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="Sequent.Environments.html#57d703d05664bc6befa1a1f25e729927"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#57d703d05664bc6befa1a1f25e729927"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="Sequent.Environments.html#2d294d8281a611996e28d18383d65b76"><span class="id" title="variable">φ</span></a><span class="id" title="notation">]}</span> <span class="id" title="notation">≡</span> <a class="idref" href="Sequent.Environments.html#57d703d05664bc6befa1a1f25e729927"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">Hf</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Sequent.Environments.html#multeq_meq"><span class="id" title="lemma">multeq_meq</span></a>. <span class="id" title="tactic">intros</span> ψ.<br/>
<span class="id" title="tactic">rewrite</span> <a class="idref" href="Sequent.Environments.html#diff_mult"><span class="id" title="lemma">diff_mult</span></a>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">elem_of_multiplicity</span> φ <span class="id" title="var">Γ</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hf</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Nat.html#mul"><span class="id" title="definition">mult</span></a>.<br/>
<span class="id" title="tactic">case</span> (<span class="id" title="definition">decide</span> (φ <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ψ)).<br/>
- <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="var">lia</span>.<br/>
- <span class="id" title="tactic">intro</span> <span class="id" title="var">Hneq</span>. <span class="id" title="tactic">setoid_rewrite</span> (<span class="id" title="lemma">multiplicity_singleton_ne</span> ψ φ); <span class="id" title="tactic">trivial</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_add_remove" class="idref" href="#env_add_remove"><span class="id" title="lemma">env_add_remove</span></a> : <span class="id" title="notation">∀</span> <span class="id" title="notation">(</span><a id="417529803507aa9a7b30461ccba6fdf8" class="idref" href="#417529803507aa9a7b30461ccba6fdf8"><span class="id" title="binder">Γ</span></a>: <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="33c8ef2ac05940dc89a8c1627bb5cbd9" class="idref" href="#33c8ef2ac05940dc89a8c1627bb5cbd9"><span class="id" title="binder">φ</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">(</span><a class="idref" href="Sequent.Environments.html#417529803507aa9a7b30461ccba6fdf8"><span class="id" title="variable">Γ</span></a> <a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="Sequent.Environments.html#33c8ef2ac05940dc89a8c1627bb5cbd9"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="Sequent.Environments.html#33c8ef2ac05940dc89a8c1627bb5cbd9"><span class="id" title="variable">φ</span></a><span class="id" title="notation">]}</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Sequent.Environments.html#417529803507aa9a7b30461ccba6fdf8"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>; <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab3"></a><h2 class="section">Conjunction, disjunction, and implication</h2>
 In the construction of propositional quantifiers, we often want to take the
    conjunction, disjunction, or implication of a (multi)set of formulas.
    The following results give some small optimizations of this process, by
    reducing "obvious" conjunctions such as ⊤ ∧ ϕ, ⊥ ∧ ϕ, etc. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="irreducible" class="idref" href="#irreducible"><span class="id" title="definition">irreducible</span></a> (<a id="8ca488d962adcdfae0a5af1368ee12c6" class="idref" href="#8ca488d962adcdfae0a5af1368ee12c6"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="notation">∀</span> <a id="p:26" class="idref" href="#p:26"><span class="id" title="binder">p</span></a> <a id="121d2b861d49b1fcee040f9bfb948b0a" class="idref" href="#121d2b861d49b1fcee040f9bfb948b0a"><span class="id" title="binder">φ</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">(</span><a class="idref" href="Syntax.im_syntax.html#Var"><span class="id" title="constructor">Var</span></a> <a class="idref" href="Sequent.Environments.html#p:26"><span class="id" title="variable">p</span></a> <a class="idref" href="Syntax.im_syntax.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> <a class="idref" href="Sequent.Environments.html#121d2b861d49b1fcee040f9bfb948b0a"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#8ca488d962adcdfae0a5af1368ee12c6"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">¬</span> <a class="idref" href="Syntax.im_syntax.html#Var"><span class="id" title="constructor">Var</span></a> <a class="idref" href="Sequent.Environments.html#p:26"><span class="id" title="variable">p</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#8ca488d962adcdfae0a5af1368ee12c6"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">¬</span> <a class="idref" href="Syntax.im_syntax.html#1a3a4fd597219ab65145ec13c238adc3"><span class="id" title="notation">⊥</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#8ca488d962adcdfae0a5af1368ee12c6"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">∀</span> <a id="b3edb256fccb76e3c292eb66d9c38347" class="idref" href="#b3edb256fccb76e3c292eb66d9c38347"><span class="id" title="binder">φ</span></a> <a id="73f692079a5a5679c5e7ed09e300f175" class="idref" href="#73f692079a5a5679c5e7ed09e300f175"><span class="id" title="binder">ψ</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">¬</span> <span class="id" title="notation">(</span><a class="idref" href="Sequent.Environments.html#b3edb256fccb76e3c292eb66d9c38347"><span class="id" title="variable">φ</span></a> <a class="idref" href="Syntax.im_syntax.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <a class="idref" href="Sequent.Environments.html#73f692079a5a5679c5e7ed09e300f175"><span class="id" title="variable">ψ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#8ca488d962adcdfae0a5af1368ee12c6"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="notation">¬</span> <span class="id" title="notation">(</span><a class="idref" href="Sequent.Environments.html#b3edb256fccb76e3c292eb66d9c38347"><span class="id" title="variable">φ</span></a> <a class="idref" href="Syntax.im_syntax.html#69989fa7eceaf90171daa1151728e2a6"><span class="id" title="notation">∨</span></a> <a class="idref" href="Sequent.Environments.html#73f692079a5a5679c5e7ed09e300f175"><span class="id" title="variable">ψ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#8ca488d962adcdfae0a5af1368ee12c6"><span class="id" title="variable">Γ</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_double_negation" class="idref" href="#is_double_negation"><span class="id" title="definition">is_double_negation</span></a> <a id="33c066d1e6b296e2606e1d62c300d1f1" class="idref" href="#33c066d1e6b296e2606e1d62c300d1f1"><span class="id" title="binder">φ</span></a> <a id="65703fc6b913cf8967f240b98a9d121a" class="idref" href="#65703fc6b913cf8967f240b98a9d121a"><span class="id" title="binder">ψ</span></a> := <a class="idref" href="Sequent.Environments.html#33c066d1e6b296e2606e1d62c300d1f1"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Syntax.im_syntax.html#89335bb7773696a226bf41e8343e6c3f"><span class="id" title="notation">¬</span></a> <a class="idref" href="Syntax.im_syntax.html#89335bb7773696a226bf41e8343e6c3f"><span class="id" title="notation">¬</span></a> <a class="idref" href="Sequent.Environments.html#65703fc6b913cf8967f240b98a9d121a"><span class="id" title="variable">ψ</span></a>.<br/>
<span class="id" title="keyword">Global Instance</span> <a id="decidable_is_double_negation" class="idref" href="#decidable_is_double_negation"><span class="id" title="instance">decidable_is_double_negation</span></a> <a id="3b8401c918370dcb163afeb57378df25" class="idref" href="#3b8401c918370dcb163afeb57378df25"><span class="id" title="binder">φ</span></a> <a id="90be620cad173064562588695a1ddce0" class="idref" href="#90be620cad173064562588695a1ddce0"><span class="id" title="binder">ψ</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="class">Decision</span> (<a class="idref" href="Sequent.Environments.html#is_double_negation"><span class="id" title="definition">is_double_negation</span></a> <a class="idref" href="Sequent.Environments.html#3b8401c918370dcb163afeb57378df25"><span class="id" title="variable">φ</span></a> <a class="idref" href="Sequent.Environments.html#90be620cad173064562588695a1ddce0"><span class="id" title="variable">ψ</span></a>) := <span class="id" title="definition">decide</span> (φ <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a>  <a class="idref" href="Syntax.im_syntax.html#89335bb7773696a226bf41e8343e6c3f"><span class="id" title="notation">¬</span></a> <a class="idref" href="Syntax.im_syntax.html#89335bb7773696a226bf41e8343e6c3f"><span class="id" title="notation">¬</span></a> ψ).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_implication" class="idref" href="#is_implication"><span class="id" title="definition">is_implication</span></a>  (<a id="e1c460f07e68babf0246822351fc594f" class="idref" href="#e1c460f07e68babf0246822351fc594f"><span class="id" title="binder">φ</span></a> <a id="a0fcf3e821e776492e9f1853fa107353" class="idref" href="#a0fcf3e821e776492e9f1853fa107353"><span class="id" title="binder">ψ</span></a> : <a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a>) := <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="d849de831f4ecaba7bbd26f27ae95e58" class="idref" href="#d849de831f4ecaba7bbd26f27ae95e58"><span class="id" title="binder">θ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="Sequent.Environments.html#e1c460f07e68babf0246822351fc594f"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#d849de831f4ecaba7bbd26f27ae95e58"><span class="id" title="variable">θ</span></a> <a class="idref" href="Syntax.im_syntax.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> <a class="idref" href="Sequent.Environments.html#a0fcf3e821e776492e9f1853fa107353"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Global Instance</span> <a id="decidable_is_implication" class="idref" href="#decidable_is_implication"><span class="id" title="instance">decidable_is_implication</span></a> <a id="e1547d3802f74ec75531c36840a5933f" class="idref" href="#e1547d3802f74ec75531c36840a5933f"><span class="id" title="binder">φ</span></a> <a id="ddd245c1acdcca94398ffd171856d37e" class="idref" href="#ddd245c1acdcca94398ffd171856d37e"><span class="id" title="binder">ψ</span></a> : <span class="id" title="class">Decision</span> (<a class="idref" href="Sequent.Environments.html#is_implication"><span class="id" title="definition">is_implication</span></a> <a class="idref" href="Sequent.Environments.html#e1547d3802f74ec75531c36840a5933f"><span class="id" title="variable">φ</span></a> <a class="idref" href="Sequent.Environments.html#ddd245c1acdcca94398ffd171856d37e"><span class="id" title="variable">ψ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="Sequent.Environments.html#is_implication"><span class="id" title="definition">is_implication</span></a>.<br/>
<span class="id" title="tactic">destruct</span> φ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span>[<span class="id" title="tactic">right</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">θ</span> <span class="id" title="var">Hθ</span>]; <span class="id" title="tactic">discriminate</span>].<br/>
<span class="id" title="tactic">case</span> (<span class="id" title="definition">decide</span> (φ2 <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ψ)).<br/>
- <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">intro</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">right</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">θ</span> <span class="id" title="var">Hθ</span>]. <span class="id" title="var">now</span> <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">Hθ</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_negation" class="idref" href="#is_negation"><span class="id" title="definition">is_negation</span></a> <a id="f670e0558f9ccb8c272365f4c1295f3f" class="idref" href="#f670e0558f9ccb8c272365f4c1295f3f"><span class="id" title="binder">φ</span></a> <a id="87e278fadc620a32dd6fd12802eef4c1" class="idref" href="#87e278fadc620a32dd6fd12802eef4c1"><span class="id" title="binder">ψ</span></a> := <a class="idref" href="Sequent.Environments.html#f670e0558f9ccb8c272365f4c1295f3f"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Syntax.im_syntax.html#89335bb7773696a226bf41e8343e6c3f"><span class="id" title="notation">¬</span></a> <a class="idref" href="Sequent.Environments.html#87e278fadc620a32dd6fd12802eef4c1"><span class="id" title="variable">ψ</span></a>.<br/>
<span class="id" title="keyword">Global Instance</span> <a id="decidable_is_negation" class="idref" href="#decidable_is_negation"><span class="id" title="instance">decidable_is_negation</span></a> <a id="043619e6926ab5395422d78ce5d296b6" class="idref" href="#043619e6926ab5395422d78ce5d296b6"><span class="id" title="binder">φ</span></a> <a id="3e370995bd56bfe06f969568e7d7e554" class="idref" href="#3e370995bd56bfe06f969568e7d7e554"><span class="id" title="binder">ψ</span></a> : <span class="id" title="class">Decision</span> (<a class="idref" href="Sequent.Environments.html#is_negation"><span class="id" title="definition">is_negation</span></a> <a class="idref" href="Sequent.Environments.html#043619e6926ab5395422d78ce5d296b6"><span class="id" title="variable">φ</span></a> <a class="idref" href="Sequent.Environments.html#3e370995bd56bfe06f969568e7d7e554"><span class="id" title="variable">ψ</span></a>) := <span class="id" title="definition">decide</span> (φ <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a>  <a class="idref" href="Syntax.im_syntax.html#89335bb7773696a226bf41e8343e6c3f"><span class="id" title="notation">¬</span></a> ψ).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_diam_implication" class="idref" href="#is_diam_implication"><span class="id" title="definition">is_diam_implication</span></a>  (<a id="b21a593cc5a463973aa52c2cb99622b5" class="idref" href="#b21a593cc5a463973aa52c2cb99622b5"><span class="id" title="binder">φ</span></a> : <a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a>) := <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="5ee7b8c4dae565faa36eaa99012b6f37" class="idref" href="#5ee7b8c4dae565faa36eaa99012b6f37"><span class="id" title="binder">θ</span></a> <a id="9072eaadef1585ea4b489a775153949f" class="idref" href="#9072eaadef1585ea4b489a775153949f"><span class="id" title="binder">ψ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="Sequent.Environments.html#b21a593cc5a463973aa52c2cb99622b5"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="Syntax.im_syntax.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">(</span></a><a class="idref" href="Syntax.im_syntax.html#2aa1fa3c322909ae16d5ebf5781d0ba3"><span class="id" title="notation">◊</span></a> <a class="idref" href="Sequent.Environments.html#5ee7b8c4dae565faa36eaa99012b6f37"><span class="id" title="variable">θ</span></a><a class="idref" href="Syntax.im_syntax.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">)</span></a> <a class="idref" href="Syntax.im_syntax.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> <a class="idref" href="Sequent.Environments.html#9072eaadef1585ea4b489a775153949f"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Global Instance</span> <a id="decidable_is_diam_implication" class="idref" href="#decidable_is_diam_implication"><span class="id" title="instance">decidable_is_diam_implication</span></a> <a id="4e83d4ef0ee23f2bb5e9f27cc38b55f5" class="idref" href="#4e83d4ef0ee23f2bb5e9f27cc38b55f5"><span class="id" title="binder">φ</span></a> : <span class="id" title="class">Decision</span> (<a class="idref" href="Sequent.Environments.html#is_diam_implication"><span class="id" title="definition">is_diam_implication</span></a> <a class="idref" href="Sequent.Environments.html#4e83d4ef0ee23f2bb5e9f27cc38b55f5"><span class="id" title="variable">φ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="Sequent.Environments.html#is_diam_implication"><span class="id" title="definition">is_diam_implication</span></a>.<br/>
<span class="id" title="tactic">destruct</span> φ.<br/>
1-4,6-7: <span class="id" title="tactic">right</span> ; <span class="id" title="tactic">intro</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">θ</span> [ψ <span class="id" title="var">H</span>]] ; <span class="id" title="tactic">discriminate</span>.<br/>
<span class="id" title="tactic">destruct</span> φ1.<br/>
1-6: <span class="id" title="tactic">right</span> ; <span class="id" title="tactic">intro</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">θ</span> [ψ <span class="id" title="var">H</span>]] ; <span class="id" title="tactic">discriminate</span>.<br/>
<span class="id" title="tactic">left</span> ; <span class="id" title="tactic">do</span> 2 (<span class="id" title="tactic">eexists</span> ; <span class="id" title="tactic">auto</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_diam_implication_b" class="idref" href="#is_diam_implication_b"><span class="id" title="definition">is_diam_implication_b</span></a> (<a id="7dc107a216fa9a82cceaed22fa53318b" class="idref" href="#7dc107a216fa9a82cceaed22fa53318b"><span class="id" title="binder">φ</span></a> : <a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a>) := <span class="id" title="keyword">match</span> <a class="idref" href="Sequent.Environments.html#7dc107a216fa9a82cceaed22fa53318b"><span class="id" title="variable">φ</span></a> <span class="id" title="keyword">with</span><br/>
| φ1 <a class="idref" href="Syntax.im_syntax.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> φ2 =&gt; <span class="id" title="keyword">match</span> φ1 <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Syntax.im_syntax.html#2aa1fa3c322909ae16d5ebf5781d0ba3"><span class="id" title="notation">◊</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="diamimp_partition" class="idref" href="#diamimp_partition"><span class="id" title="lemma">diamimp_partition</span></a> <a id="l:50" class="idref" href="#l:50"><span class="id" title="binder">l</span></a> : <br/>
&nbsp;&nbsp;<span class="id" title="definition">List.filter</span> <a class="idref" href="Sequent.Environments.html#is_diam_implication_b"><span class="id" title="definition">is_diam_implication_b</span></a> <a class="idref" href="Sequent.Environments.html#l:50"><span class="id" title="variable">l</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="definition">List.filter</span> (<span class="id" title="notation">λ</span> <a id="c1eb67fa796782b0f3be8fd3e2a28f59" class="idref" href="#c1eb67fa796782b0f3be8fd3e2a28f59"><span class="id" title="binder">φ0</span></a> : <a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="Sequent.Environments.html#is_diam_implication_b"><span class="id" title="definition">is_diam_implication_b</span></a> <a class="idref" href="Sequent.Environments.html#c1eb67fa796782b0f3be8fd3e2a28f59"><span class="id" title="variable">φ0</span></a>)) <a class="idref" href="Sequent.Environments.html#l:50"><span class="id" title="variable">l</span></a> <span class="id" title="notation">≡ₚ</span> <a class="idref" href="Sequent.Environments.html#l:50"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> ; <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="tactic">destruct</span> (<a class="idref" href="Sequent.Environments.html#is_diam_implication_b"><span class="id" title="definition">is_diam_implication_b</span></a> <span class="id" title="var">a</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span> ; <span class="id" title="var">cbn</span>.<br/>
- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span> ; <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">Permutation_middle</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab4"></a><h2 class="section">A dependent version of `map`</h2>

</div>
<div class="code">
<span class="comment">(*&nbsp;a&nbsp;dependent&nbsp;map&nbsp;on&nbsp;lists,&nbsp;with&nbsp;knowledge&nbsp;that&nbsp;we&nbsp;are&nbsp;on&nbsp;that&nbsp;list&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;should&nbsp;work&nbsp;with&nbsp;any&nbsp;set-like&nbsp;type&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Program Fixpoint</span> <a id="in_map_aux" class="idref" href="#in_map_aux"><span class="id" title="definition">in_map_aux</span></a> {<a id="A:52" class="idref" href="#A:52"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} (<a id="6c48d2981cee562ec855ecfa4a686fde" class="idref" href="#6c48d2981cee562ec855ecfa4a686fde"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a>) (<a id="f:55" class="idref" href="#f:55"><span class="id" title="binder">f</span></a> : <span class="id" title="notation">forall</span> <a id="772bc84a81c4525400b2d7aca7035ca6" class="idref" href="#772bc84a81c4525400b2d7aca7035ca6"><span class="id" title="binder">φ</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#772bc84a81c4525400b2d7aca7035ca6"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#6c48d2981cee562ec855ecfa4a686fde"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#A:52"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;<a id="86a0a1f6bf90e10da1e90129056ac77e" class="idref" href="#86a0a1f6bf90e10da1e90129056ac77e"><span class="id" title="binder">Γ'</span></a> (<a id="54aed0f9ce03ea4158557600dc2f14ad" class="idref" href="#54aed0f9ce03ea4158557600dc2f14ad"><span class="id" title="binder">HΓ'</span></a> : <a class="idref" href="Sequent.Environments.html#86a0a1f6bf90e10da1e90129056ac77e"><span class="id" title="variable">Γ'</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="Sequent.Environments.html#6c48d2981cee562ec855ecfa4a686fde"><span class="id" title="variable">Γ</span></a>) : <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Sequent.Environments.html#A:52"><span class="id" title="variable">A</span></a>:=<br/>
<span class="id" title="keyword">match</span> <a class="idref" href="Sequent.Environments.html#86a0a1f6bf90e10da1e90129056ac77e"><span class="id" title="variable">Γ'</span></a> <span class="id" title="keyword">with</span><br/>
| <span class="id" title="notation">[]</span> =&gt; <span class="id" title="notation">[]</span><br/>
| <span class="id" title="var">a</span><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><span class="id" title="var">Γ'</span> =&gt; <a class="idref" href="Sequent.Environments.html#f:55"><span class="id" title="variable">f</span></a> <span class="id" title="var">a</span> <span class="id" title="var">_</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="Sequent.Environments.html#in_map_aux:58"><span class="id" title="definition">in_map_aux</span></a> <a class="idref" href="Sequent.Environments.html#6c48d2981cee562ec855ecfa4a686fde"><span class="id" title="variable">Γ</span></a> <a class="idref" href="Sequent.Environments.html#f:55"><span class="id" title="variable">f</span></a> <a class="idref" href="Sequent.Environments.html#86a0a1f6bf90e10da1e90129056ac77e"><span class="id" title="variable">Γ'</span></a> <span class="id" title="var">_</span><br/>
<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="in_map" class="idref" href="#in_map"><span class="id" title="definition">in_map</span></a> {<a id="A:60" class="idref" href="#A:60"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} <a id="316bf51392b35e821b63bde80bf611ff" class="idref" href="#316bf51392b35e821b63bde80bf611ff"><span class="id" title="binder">Γ</span></a><br/>
&nbsp;&nbsp;(<a id="f:63" class="idref" href="#f:63"><span class="id" title="binder">f</span></a> : <span class="id" title="notation">forall</span> <a id="a97433c5c1f9a55cf5a79b18796bb26d" class="idref" href="#a97433c5c1f9a55cf5a79b18796bb26d"><span class="id" title="binder">φ</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#a97433c5c1f9a55cf5a79b18796bb26d"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#316bf51392b35e821b63bde80bf611ff"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#A:60"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Sequent.Environments.html#A:60"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Sequent.Environments.html#in_map_aux"><span class="id" title="definition">in_map_aux</span></a> <a class="idref" href="Sequent.Environments.html#316bf51392b35e821b63bde80bf611ff"><span class="id" title="variable">Γ</span></a> <a class="idref" href="Sequent.Environments.html#f:63"><span class="id" title="variable">f</span></a> <a class="idref" href="Sequent.Environments.html#316bf51392b35e821b63bde80bf611ff"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Classes.RelationClasses.html#reflexivity"><span class="id" title="definition">reflexivity</span></a> <span class="id" title="var">_</span>).<br/>

<br/>
<span class="id" title="keyword">Program Fixpoint</span> <a id="in_map2_aux" class="idref" href="#in_map2_aux"><span class="id" title="definition">in_map2_aux</span></a> {<a id="A:64" class="idref" href="#A:64"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} (<a id="79e37c9ff12ecc84ba1fac2efe4b1d20" class="idref" href="#79e37c9ff12ecc84ba1fac2efe4b1d20"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a>) (<a id="f:68" class="idref" href="#f:68"><span class="id" title="binder">f</span></a> : <span class="id" title="notation">forall</span> <a id="8dbfca0eacb4b03140997e7a2bae7595" class="idref" href="#8dbfca0eacb4b03140997e7a2bae7595"><span class="id" title="binder">φ</span></a> <a id="64c822ad84baa31bad1230fb688994ba" class="idref" href="#64c822ad84baa31bad1230fb688994ba"><span class="id" title="binder">ψ</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#8dbfca0eacb4b03140997e7a2bae7595"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#79e37c9ff12ecc84ba1fac2efe4b1d20"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#64c822ad84baa31bad1230fb688994ba"><span class="id" title="variable">ψ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#79e37c9ff12ecc84ba1fac2efe4b1d20"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#A:64"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;<a id="919d90cef4a534312d1ea3660a62680e" class="idref" href="#919d90cef4a534312d1ea3660a62680e"><span class="id" title="binder">Γ'</span></a> (<a id="84b54d572f1b00cc7a498fce5699eac5" class="idref" href="#84b54d572f1b00cc7a498fce5699eac5"><span class="id" title="binder">HΓ'</span></a> : <a class="idref" href="Sequent.Environments.html#919d90cef4a534312d1ea3660a62680e"><span class="id" title="variable">Γ'</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="Sequent.Environments.html#79e37c9ff12ecc84ba1fac2efe4b1d20"><span class="id" title="variable">Γ</span></a>) : <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Sequent.Environments.html#A:64"><span class="id" title="variable">A</span></a> :=<br/>
<span class="id" title="keyword">match</span> <a class="idref" href="Sequent.Environments.html#919d90cef4a534312d1ea3660a62680e"><span class="id" title="variable">Γ'</span></a> <span class="id" title="keyword">with</span><br/>
| <span class="id" title="notation">[]</span> =&gt; <span class="id" title="notation">[]</span><br/>
| <span class="id" title="var">a</span><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">Γ''</span> =&gt; <a class="idref" href="Sequent.Environments.html#in_map"><span class="id" title="definition">in_map</span></a> <a class="idref" href="Sequent.Environments.html#79e37c9ff12ecc84ba1fac2efe4b1d20"><span class="id" title="variable">Γ</span></a> (<span class="id" title="keyword">fun</span> <a id="b:73" class="idref" href="#b:73"><span class="id" title="binder">b</span></a> (<a id="Hinb:74" class="idref" href="#Hinb:74"><span class="id" title="binder">Hinb</span></a> : <a class="idref" href="Sequent.Environments.html#b:73"><span class="id" title="variable">b</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#79e37c9ff12ecc84ba1fac2efe4b1d20"><span class="id" title="variable">Γ</span></a>) =&gt; <a class="idref" href="Sequent.Environments.html#f:68"><span class="id" title="variable">f</span></a> <span class="id" title="var">a</span> <a class="idref" href="Sequent.Environments.html#b:73"><span class="id" title="variable">b</span></a> <span class="id" title="var">_</span> <a class="idref" href="Sequent.Environments.html#Hinb:74"><span class="id" title="variable">Hinb</span></a>) <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="Sequent.Environments.html#in_map2_aux:71"><span class="id" title="definition">in_map2_aux</span></a> <a class="idref" href="Sequent.Environments.html#79e37c9ff12ecc84ba1fac2efe4b1d20"><span class="id" title="variable">Γ</span></a> <a class="idref" href="Sequent.Environments.html#f:68"><span class="id" title="variable">f</span></a> <span class="id" title="var">Γ''</span> <span class="id" title="var">_</span><br/>
<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="in_map2" class="idref" href="#in_map2"><span class="id" title="definition">in_map2</span></a> {<a id="A:75" class="idref" href="#A:75"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} <a id="885e6108c1350c686de92430329090ea" class="idref" href="#885e6108c1350c686de92430329090ea"><span class="id" title="binder">Γ</span></a><br/>
&nbsp;&nbsp;(<a id="f:79" class="idref" href="#f:79"><span class="id" title="binder">f</span></a> : <span class="id" title="notation">forall</span> <a id="1c92da39ae97b46a0c31fd9270fb165d" class="idref" href="#1c92da39ae97b46a0c31fd9270fb165d"><span class="id" title="binder">φ</span></a> <a id="ed111f9f41c0a1293d08246913f541b0" class="idref" href="#ed111f9f41c0a1293d08246913f541b0"><span class="id" title="binder">ψ</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#1c92da39ae97b46a0c31fd9270fb165d"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#885e6108c1350c686de92430329090ea"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#ed111f9f41c0a1293d08246913f541b0"><span class="id" title="variable">ψ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#885e6108c1350c686de92430329090ea"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#A:75"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Sequent.Environments.html#A:75"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Sequent.Environments.html#in_map2_aux"><span class="id" title="definition">in_map2_aux</span></a> <a class="idref" href="Sequent.Environments.html#885e6108c1350c686de92430329090ea"><span class="id" title="variable">Γ</span></a> <a class="idref" href="Sequent.Environments.html#f:79"><span class="id" title="variable">f</span></a> <a class="idref" href="Sequent.Environments.html#885e6108c1350c686de92430329090ea"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Classes.RelationClasses.html#reflexivity"><span class="id" title="definition">reflexivity</span></a> <span class="id" title="var">_</span>).<br/>

<br/>
<span class="comment">(*&nbsp;This&nbsp;generalises&nbsp;to&nbsp;any&nbsp;type.&nbsp;decidability&nbsp;of&nbsp;equality&nbsp;over&nbsp;this&nbsp;type&nbsp;is&nbsp;necessary&nbsp;for&nbsp;a&nbsp;result&nbsp;in&nbsp;"Type"&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="in_in_map" class="idref" href="#in_in_map"><span class="id" title="lemma">in_in_map</span></a> {<a id="A:80" class="idref" href="#A:80"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} {<a id="HD:83" class="idref" href="#HD:83"><span class="id" title="binder">HD</span></a> : <span class="id" title="notation">forall</span> <a id="a:81" class="idref" href="#a:81"><span class="id" title="binder">a</span></a> <a id="b:82" class="idref" href="#b:82"><span class="id" title="binder">b</span></a> : <a class="idref" href="Sequent.Environments.html#A:80"><span class="id" title="variable">A</span></a><span class="id" title="notation">,</span> <span class="id" title="class">Decision</span> (<a class="idref" href="Sequent.Environments.html#a:81"><span class="id" title="variable">a</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Sequent.Environments.html#b:82"><span class="id" title="variable">b</span></a>)}<br/>
&nbsp;&nbsp;<a id="9f2f2171bb09ae89187003f4d4733ede" class="idref" href="#9f2f2171bb09ae89187003f4d4733ede"><span class="id" title="binder">Γ</span></a> (<a id="f:86" class="idref" href="#f:86"><span class="id" title="binder">f</span></a> : <span class="id" title="notation">forall</span> <a id="d0732058d0e294910d5f7e9de46a633b" class="idref" href="#d0732058d0e294910d5f7e9de46a633b"><span class="id" title="binder">φ</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#d0732058d0e294910d5f7e9de46a633b"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#9f2f2171bb09ae89187003f4d4733ede"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#A:80"><span class="id" title="variable">A</span></a>) <a id="110572ed38600fa9df1840c433f4456e" class="idref" href="#110572ed38600fa9df1840c433f4456e"><span class="id" title="binder">ψ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Sequent.Environments.html#110572ed38600fa9df1840c433f4456e"><span class="id" title="variable">ψ</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="Sequent.Environments.html#in_map"><span class="id" title="definition">in_map</span></a> <a class="idref" href="Sequent.Environments.html#9f2f2171bb09ae89187003f4d4733ede"><span class="id" title="variable">Γ</span></a> <a class="idref" href="Sequent.Environments.html#f:86"><span class="id" title="variable">f</span></a><span class="id" title="notation">)</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">{</span></a><a id="c42ea5e252e021a883a753d81b07ee92" class="idref" href="#c42ea5e252e021a883a753d81b07ee92"><span class="id" title="binder">ψ0</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="Hin:89" class="idref" href="#Hin:89"><span class="id" title="binder">Hin</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="Sequent.Environments.html#110572ed38600fa9df1840c433f4456e"><span class="id" title="variable">ψ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Sequent.Environments.html#f:86"><span class="id" title="variable">f</span></a> <a class="idref" href="Sequent.Environments.html#c42ea5e252e021a883a753d81b07ee92"><span class="id" title="variable">ψ0</span></a> <a class="idref" href="Sequent.Environments.html#Hin:89"><span class="id" title="variable">Hin</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="Sequent.Environments.html#in_map"><span class="id" title="definition">in_map</span></a>.<br/>
<span class="id" title="tactic">assert</span>(<span class="id" title="var">Hcut</span> : <span class="id" title="notation">forall</span> <a id="ebe00639f6f3c654e25132c0b7d3d940" class="idref" href="#ebe00639f6f3c654e25132c0b7d3d940"><span class="id" title="binder"><span id="7f51aa536e7a2b456fa495de46ba5659" class="id">Γ'</span></span></a> (<a id="3f3410ac56db99539fd213a906348a32" class="idref" href="#3f3410ac56db99539fd213a906348a32"><span class="id" title="binder"><span id="4fc1b260a32cafa19ed24686daf328ac" class="id">HΓ'</span></span></a> : <a class="idref" href="Sequent.Environments.html#ebe00639f6f3c654e25132c0b7d3d940"><span class="id" title="variable">Γ'</span></a> <span class="id" title="notation">⊆</span> <span class="id" title="var">Γ</span><span class="id" title="notation">),</span> ψ <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#in_map_aux"><span class="id" title="definition">in_map_aux</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">f</span> <a class="idref" href="Sequent.Environments.html#ebe00639f6f3c654e25132c0b7d3d940"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="Sequent.Environments.html#3f3410ac56db99539fd213a906348a32"><span class="id" title="variable">HΓ'</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">→</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">{</span></a><a id="fa03b7cfc1cd196f55da9babdd724be9" class="idref" href="#fa03b7cfc1cd196f55da9babdd724be9"><span class="id" title="binder"><span id="669d61c0b897a6d994b4546c0a636fbe" class="id">ψ0</span></span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a><a id="Hin:93" class="idref" href="#Hin:93"><span class="id" title="binder"><span id="Hin:97" class="id">Hin</span></span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="Sequent.Environments.html#fa03b7cfc1cd196f55da9babdd724be9"><span class="id" title="variable">ψ0</span></a> <span class="id" title="notation">∈</span> <span class="id" title="var">Γ</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> ψ <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">f</span> <a class="idref" href="Sequent.Environments.html#fa03b7cfc1cd196f55da9babdd724be9"><span class="id" title="variable">ψ0</span></a> <a class="idref" href="Sequent.Environments.html#Hin:93"><span class="id" title="variable">Hin</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">}</span></a>); [|<span class="id" title="tactic">apply</span> <span class="id" title="var">Hcut</span>].<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ'</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">HΓ'</span> <span class="id" title="var">Hin</span>.<br/>
- <span class="id" title="var">contradict</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_nil</span>.<br/>
- <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> | <span class="id" title="var">H</span> : ψ <span class="id" title="notation">∈</span> ?<span class="id" title="var">a</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#in_map_aux"><span class="id" title="definition">in_map_aux</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ?<span class="id" title="var">HΓ''</span><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">)</span></a> |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> (<span class="id" title="definition">decide</span> (ψ <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>)); [| <span class="id" title="tactic">pose</span> (<span class="id" title="var">myHΓ'</span> := <span class="id" title="var">HΓ''</span>)] <span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">Hneq</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHΓ'</span> <span class="id" title="var">myHΓ'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">tauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_in_map2" class="idref" href="#in_in_map2"><span class="id" title="lemma">in_in_map2</span></a> <a id="878757e82380a219aa75a7453ddf1b39" class="idref" href="#878757e82380a219aa75a7453ddf1b39"><span class="id" title="binder">Γ</span></a> (<a id="f:101" class="idref" href="#f:101"><span class="id" title="binder">f</span></a> : <span class="id" title="notation">forall</span> <a id="54d008a98fe9ec21d88bf6f9daacaf8f" class="idref" href="#54d008a98fe9ec21d88bf6f9daacaf8f"><span class="id" title="binder">φ</span></a> <a id="6a9b2f61314dc4505e72b0ce33cd8b2f" class="idref" href="#6a9b2f61314dc4505e72b0ce33cd8b2f"><span class="id" title="binder">ψ</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#54d008a98fe9ec21d88bf6f9daacaf8f"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#878757e82380a219aa75a7453ddf1b39"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#6a9b2f61314dc4505e72b0ce33cd8b2f"><span class="id" title="variable">ψ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#878757e82380a219aa75a7453ddf1b39"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a>) <a id="57e2fc214b6293451e57fd88f61d6d21" class="idref" href="#57e2fc214b6293451e57fd88f61d6d21"><span class="id" title="binder">ψ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Sequent.Environments.html#57e2fc214b6293451e57fd88f61d6d21"><span class="id" title="variable">ψ</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="Sequent.Environments.html#in_map2"><span class="id" title="definition">in_map2</span></a> <a class="idref" href="Sequent.Environments.html#878757e82380a219aa75a7453ddf1b39"><span class="id" title="variable">Γ</span></a> <a class="idref" href="Sequent.Environments.html#f:101"><span class="id" title="variable">f</span></a><span class="id" title="notation">)</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">{</span></a><a id="9c9723d58d5cd7ad604efe174b5ea460" class="idref" href="#9c9723d58d5cd7ad604efe174b5ea460"><span class="id" title="binder">ψ0</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">{</span></a><a id="eef6b3cbbfdc3193d2119593c868e52d" class="idref" href="#eef6b3cbbfdc3193d2119593c868e52d"><span class="id" title="binder">ψ1</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="Hin1:105" class="idref" href="#Hin1:105"><span class="id" title="binder">Hin1</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="Hin2:106" class="idref" href="#Hin2:106"><span class="id" title="binder">Hin2</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="Sequent.Environments.html#57e2fc214b6293451e57fd88f61d6d21"><span class="id" title="variable">ψ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Sequent.Environments.html#f:101"><span class="id" title="variable">f</span></a> <a class="idref" href="Sequent.Environments.html#9c9723d58d5cd7ad604efe174b5ea460"><span class="id" title="variable">ψ0</span></a> <a class="idref" href="Sequent.Environments.html#eef6b3cbbfdc3193d2119593c868e52d"><span class="id" title="variable">ψ1</span></a> <a class="idref" href="Sequent.Environments.html#Hin1:105"><span class="id" title="variable">Hin1</span></a> <a class="idref" href="Sequent.Environments.html#Hin2:106"><span class="id" title="variable">Hin2</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}}</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="Sequent.Environments.html#in_map2"><span class="id" title="definition">in_map2</span></a>.<br/>
<span class="id" title="tactic">assert</span>(<span class="id" title="var">Hcut</span> : <span class="id" title="notation">forall</span> <a id="6499d65fb1a53768dbc7f7c00996f6c5" class="idref" href="#6499d65fb1a53768dbc7f7c00996f6c5"><span class="id" title="binder"><span id="75de39a818cbbcb3258a49962da91275" class="id">Γ'</span></span></a> (<a id="c63e520ed382ad0bcad2bcbb2bf6d112" class="idref" href="#c63e520ed382ad0bcad2bcbb2bf6d112"><span class="id" title="binder"><span id="fa6cb5d621b6bed68d33185a682f3223" class="id">HΓ'</span></span></a> : <a class="idref" href="Sequent.Environments.html#6499d65fb1a53768dbc7f7c00996f6c5"><span class="id" title="variable">Γ'</span></a> <span class="id" title="notation">⊆</span> <span class="id" title="var">Γ</span><span class="id" title="notation">),</span> ψ <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#in_map2_aux"><span class="id" title="definition">in_map2_aux</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">f</span> <a class="idref" href="Sequent.Environments.html#6499d65fb1a53768dbc7f7c00996f6c5"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="Sequent.Environments.html#c63e520ed382ad0bcad2bcbb2bf6d112"><span class="id" title="variable">HΓ'</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">→</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">{</span></a><a id="1ead7822f29aa297dae5b15051873ab8" class="idref" href="#1ead7822f29aa297dae5b15051873ab8"><span class="id" title="binder"><span id="9339c81d5d8867006e37c6616937ffcb" class="id">ψ0</span></span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">{</span></a><a id="4fe071a4c90a4d6f77df2274acbb11b7" class="idref" href="#4fe071a4c90a4d6f77df2274acbb11b7"><span class="id" title="binder"><span id="40689c0e55646508dd471135d6b4bb2f" class="id">ψ1</span></span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="Hin1:111" class="idref" href="#Hin1:111"><span class="id" title="binder"><span id="Hin1:117" class="id">Hin1</span></span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="Hin2:112" class="idref" href="#Hin2:112"><span class="id" title="binder"><span id="Hin2:118" class="id">Hin2</span></span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> ψ <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">f</span> <a class="idref" href="Sequent.Environments.html#1ead7822f29aa297dae5b15051873ab8"><span class="id" title="variable">ψ0</span></a> <a class="idref" href="Sequent.Environments.html#4fe071a4c90a4d6f77df2274acbb11b7"><span class="id" title="variable">ψ1</span></a> <a class="idref" href="Sequent.Environments.html#Hin1:111"><span class="id" title="variable">Hin1</span></a> <a class="idref" href="Sequent.Environments.html#Hin2:112"><span class="id" title="variable">Hin2</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}}</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">}}</span></a>); [|<span class="id" title="tactic">apply</span> <span class="id" title="var">Hcut</span>].<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ'</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">HΓ'</span> <span class="id" title="var">Hin</span>.<br/>
- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_nil</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span> ; <span class="id" title="var">contradiction</span>.<br/>
- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span> ; <span class="id" title="tactic">apply</span> <a class="idref" href="Sequent.syntax_facts.html#in_app_orT"><span class="id" title="lemma">in_app_orT</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span>,<a class="idref" href="Sequent.Environments.html#in_in_map"><span class="id" title="lemma">in_in_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span> <span class="id" title="keyword">as</span> [ψ0 [<span class="id" title="var">Hin'</span> <span class="id" title="var">Heq</span>]] ; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span> <span class="id" title="tactic">in</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHΓ'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Local Definition</span> <a id="in_subset" class="idref" href="#in_subset"><span class="id" title="definition">in_subset</span></a> {<a id="e6bb8b3e7b4f2d9663b568c177a5d39b" class="idref" href="#e6bb8b3e7b4f2d9663b568c177a5d39b"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>} {<a id="211c8e23db70b0fdb0c63ba3bf5850e4" class="idref" href="#211c8e23db70b0fdb0c63ba3bf5850e4"><span class="id" title="binder">Γ'</span></a>} (<a id="Hi:121" class="idref" href="#Hi:121"><span class="id" title="binder">Hi</span></a> : <a class="idref" href="Sequent.Environments.html#211c8e23db70b0fdb0c63ba3bf5850e4"><span class="id" title="variable">Γ'</span></a> <span class="id" title="notation">⊆</span> <span class="id" title="definition">elements</span> <a class="idref" href="Sequent.Environments.html#e6bb8b3e7b4f2d9663b568c177a5d39b"><span class="id" title="variable">Γ</span></a>) {<a id="96505625075ff191cdefaeeaa47b1cd8" class="idref" href="#96505625075ff191cdefaeeaa47b1cd8"><span class="id" title="binder">ψ0</span></a>} (<a id="Hin:123" class="idref" href="#Hin:123"><span class="id" title="binder">Hin</span></a> : <a class="idref" href="Sequent.Environments.html#96505625075ff191cdefaeeaa47b1cd8"><span class="id" title="variable">ψ0</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#211c8e23db70b0fdb0c63ba3bf5850e4"><span class="id" title="variable">Γ'</span></a>) : <a class="idref" href="Sequent.Environments.html#96505625075ff191cdefaeeaa47b1cd8"><span class="id" title="variable">ψ0</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#e6bb8b3e7b4f2d9663b568c177a5d39b"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elem_of_elements</span>,<span class="id" title="var">Hi</span>, <span class="id" title="var">Hin</span>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="comment">(*&nbsp;converse&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="in_map_in" class="idref" href="#in_map_in"><span class="id" title="lemma">in_map_in</span></a> {<a id="A:124" class="idref" href="#A:124"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} {<a id="HD:127" class="idref" href="#HD:127"><span class="id" title="binder">HD</span></a> : <span class="id" title="notation">forall</span> <a id="a:125" class="idref" href="#a:125"><span class="id" title="binder">a</span></a> <a id="b:126" class="idref" href="#b:126"><span class="id" title="binder">b</span></a> : <a class="idref" href="Sequent.Environments.html#A:124"><span class="id" title="variable">A</span></a><span class="id" title="notation">,</span> <span class="id" title="class">Decision</span> (<a class="idref" href="Sequent.Environments.html#a:125"><span class="id" title="variable">a</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Sequent.Environments.html#b:126"><span class="id" title="variable">b</span></a>)}<br/>
&nbsp;&nbsp;{<a id="8efffc592e6af918f5f06b910eadbcf9" class="idref" href="#8efffc592e6af918f5f06b910eadbcf9"><span class="id" title="binder">Γ</span></a>} {<a id="f:130" class="idref" href="#f:130"><span class="id" title="binder">f</span></a> : <span class="id" title="notation">forall</span> <a id="b668c9d116e6fd10f514d118828e9250" class="idref" href="#b668c9d116e6fd10f514d118828e9250"><span class="id" title="binder">φ</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#b668c9d116e6fd10f514d118828e9250"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#8efffc592e6af918f5f06b910eadbcf9"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#A:124"><span class="id" title="variable">A</span></a>} {<a id="696375e5c5f0424631a67507f15440f8" class="idref" href="#696375e5c5f0424631a67507f15440f8"><span class="id" title="binder">ψ0</span></a>} (<a id="Hin:132" class="idref" href="#Hin:132"><span class="id" title="binder">Hin</span></a> : <a class="idref" href="Sequent.Environments.html#696375e5c5f0424631a67507f15440f8"><span class="id" title="variable">ψ0</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#8efffc592e6af918f5f06b910eadbcf9"><span class="id" title="variable">Γ</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="Hin':133" class="idref" href="#Hin':133"><span class="id" title="binder">Hin'</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="Sequent.Environments.html#f:130"><span class="id" title="variable">f</span></a> <a class="idref" href="Sequent.Environments.html#696375e5c5f0424631a67507f15440f8"><span class="id" title="variable">ψ0</span></a> <a class="idref" href="Sequent.Environments.html#Hin':133"><span class="id" title="variable">Hin'</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="Sequent.Environments.html#in_map"><span class="id" title="definition">in_map</span></a> <a class="idref" href="Sequent.Environments.html#8efffc592e6af918f5f06b910eadbcf9"><span class="id" title="variable">Γ</span></a> <a class="idref" href="Sequent.Environments.html#f:130"><span class="id" title="variable">f</span></a><span class="id" title="notation">)</span><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="Sequent.Environments.html#in_map"><span class="id" title="definition">in_map</span></a>.<br/>
<span class="id" title="tactic">assert</span>(<span class="id" title="var">Hcut</span> : <span class="id" title="notation">forall</span> <a id="1c42fe50a9a194d3f60332e1ec6bd014" class="idref" href="#1c42fe50a9a194d3f60332e1ec6bd014"><span class="id" title="binder"><span id="92cf979e82cbd081650698421019063d" class="id">Γ'</span></span></a> (<a id="246fef23b033cdca3b70bab5a706b1ab" class="idref" href="#246fef23b033cdca3b70bab5a706b1ab"><span class="id" title="binder"><span id="c5479884a62da9246c114b731b922612" class="id">HΓ'</span></span></a> : <a class="idref" href="Sequent.Environments.html#1c42fe50a9a194d3f60332e1ec6bd014"><span class="id" title="variable">Γ'</span></a> <span class="id" title="notation">⊆</span> <span class="id" title="var">Γ</span>) <a id="50b92634675ac38d85323da1cee32ad9" class="idref" href="#50b92634675ac38d85323da1cee32ad9"><span class="id" title="binder"><span id="44e9eba795bedb4ad37624641e7da68e" class="id">ψ0</span></span></a> (<a id="Hin:137" class="idref" href="#Hin:137"><span class="id" title="binder"><span id="Hin:142" class="id">Hin</span></span></a> : <span class="id" title="definition">In</span> <a class="idref" href="Sequent.Environments.html#50b92634675ac38d85323da1cee32ad9"><span class="id" title="variable">ψ0</span></a> <a class="idref" href="Sequent.Environments.html#1c42fe50a9a194d3f60332e1ec6bd014"><span class="id" title="variable">Γ'</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="Hin':138" class="idref" href="#Hin':138"><span class="id" title="binder"><span id="Hin':143" class="id">Hin'</span></span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <span class="id" title="var">f</span> <a class="idref" href="Sequent.Environments.html#50b92634675ac38d85323da1cee32ad9"><span class="id" title="variable">ψ0</span></a> <a class="idref" href="Sequent.Environments.html#Hin':138"><span class="id" title="variable">Hin'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#in_map_aux"><span class="id" title="definition">in_map_aux</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">f</span> <a class="idref" href="Sequent.Environments.html#1c42fe50a9a194d3f60332e1ec6bd014"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="Sequent.Environments.html#246fef23b033cdca3b70bab5a706b1ab"><span class="id" title="variable">HΓ'</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a>).<br/>
- <span class="id" title="tactic">induction</span> <span class="id" title="var">Γ'</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">HΓ'</span> ψ' <span class="id" title="var">Hin'</span>; [<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> (<span class="id" title="definition">decide</span> (ψ' <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">Hneq</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hin''</span> : <span class="id" title="definition">In</span> ψ' <span class="id" title="var">Γ'</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin'</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">tauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">Hincl</span> := (<a class="idref" href="Sequent.Environments.html#in_map_aux_obligation_2"><span class="id" title="lemma">in_map_aux_obligation_2</span></a> <span class="id" title="var">Γ</span> (<span class="id" title="var">a</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">Γ'</span>) <span class="id" title="var">HΓ'</span> <span class="id" title="var">a</span> <span class="id" title="var">Γ'</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHΓ'</span> <span class="id" title="var">Hincl</span> ψ' <span class="id" title="var">Hin''</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hin0</span> <span class="id" title="var">Hprop</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hprop</span>.<br/>
- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hcut</span> <span class="id" title="var">Γ</span> (<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Classes.RelationClasses.html#reflexivity"><span class="id" title="definition">reflexivity</span></a> <span class="id" title="var">Γ</span>) ψ0) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hin'</span> <span class="id" title="var">Hprop</span>].<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">Hin'</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hprop</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_map2_in" class="idref" href="#in_map2_in"><span class="id" title="lemma">in_map2_in</span></a><br/>
&nbsp;&nbsp;{<a id="929198a4a9be43daf19acfa353561705" class="idref" href="#929198a4a9be43daf19acfa353561705"><span class="id" title="binder">Γ</span></a>} {<a id="f:147" class="idref" href="#f:147"><span class="id" title="binder">f</span></a> : <span class="id" title="notation">forall</span> <a id="633899b020ebaad8bbf61500794bfb1a" class="idref" href="#633899b020ebaad8bbf61500794bfb1a"><span class="id" title="binder">φ1</span></a> <a id="1c5881c1fa2b65d91e69069486beb22f" class="idref" href="#1c5881c1fa2b65d91e69069486beb22f"><span class="id" title="binder">φ2</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#633899b020ebaad8bbf61500794bfb1a"><span class="id" title="variable">φ1</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#929198a4a9be43daf19acfa353561705"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#1c5881c1fa2b65d91e69069486beb22f"><span class="id" title="variable">φ2</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#929198a4a9be43daf19acfa353561705"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a>} {<a id="1f453d6d54399af21d328703d143f830" class="idref" href="#1f453d6d54399af21d328703d143f830"><span class="id" title="binder">ψ1</span></a> <a id="8c2c0f115d183680186e076f666d6796" class="idref" href="#8c2c0f115d183680186e076f666d6796"><span class="id" title="binder">ψ2</span></a>} (<a id="Hin1:150" class="idref" href="#Hin1:150"><span class="id" title="binder">Hin1</span></a> : <a class="idref" href="Sequent.Environments.html#1f453d6d54399af21d328703d143f830"><span class="id" title="variable">ψ1</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#929198a4a9be43daf19acfa353561705"><span class="id" title="variable">Γ</span></a>) (<a id="Hin2:151" class="idref" href="#Hin2:151"><span class="id" title="binder">Hin2</span></a> : <a class="idref" href="Sequent.Environments.html#8c2c0f115d183680186e076f666d6796"><span class="id" title="variable">ψ2</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#929198a4a9be43daf19acfa353561705"><span class="id" title="variable">Γ</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="Hin1':152" class="idref" href="#Hin1':152"><span class="id" title="binder">Hin1'</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="Hin2':153" class="idref" href="#Hin2':153"><span class="id" title="binder">Hin2'</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="Sequent.Environments.html#f:147"><span class="id" title="variable">f</span></a> <a class="idref" href="Sequent.Environments.html#1f453d6d54399af21d328703d143f830"><span class="id" title="variable">ψ1</span></a> <a class="idref" href="Sequent.Environments.html#8c2c0f115d183680186e076f666d6796"><span class="id" title="variable">ψ2</span></a> <a class="idref" href="Sequent.Environments.html#Hin1':152"><span class="id" title="variable">Hin1'</span></a> <a class="idref" href="Sequent.Environments.html#Hin2':153"><span class="id" title="variable">Hin2'</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="Sequent.Environments.html#in_map2"><span class="id" title="definition">in_map2</span></a> <a class="idref" href="Sequent.Environments.html#929198a4a9be43daf19acfa353561705"><span class="id" title="variable">Γ</span></a> <a class="idref" href="Sequent.Environments.html#f:147"><span class="id" title="variable">f</span></a><span class="id" title="notation">)</span><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="Sequent.Environments.html#in_map2"><span class="id" title="definition">in_map2</span></a>.<br/>
<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hcut</span> : <span class="id" title="notation">forall</span> <a id="13a2b26254ed035825bcd6dfd20cf204" class="idref" href="#13a2b26254ed035825bcd6dfd20cf204"><span class="id" title="binder"><span id="1381eefff67411e54e090221ad1f62c5" class="id">Γ'</span></span></a> (<a id="fa0a4a93f30c670e9920a9c7523ffcee" class="idref" href="#fa0a4a93f30c670e9920a9c7523ffcee"><span class="id" title="binder"><span id="a766ebd21f3382f15a6ca3002b4525a9" class="id">HΓ'</span></span></a> : <a class="idref" href="Sequent.Environments.html#13a2b26254ed035825bcd6dfd20cf204"><span class="id" title="variable">Γ'</span></a> <span class="id" title="notation">⊆</span> <span class="id" title="var">Γ</span>) <a id="a2dda099cabe51a75c24c03ca9adfe62" class="idref" href="#a2dda099cabe51a75c24c03ca9adfe62"><span class="id" title="binder"><span id="20a7b25c9dc1c86b9195e69edaeddc8c" class="id">ψ1</span></span></a> <a id="cd322b77ad61742f71035957436a8db4" class="idref" href="#cd322b77ad61742f71035957436a8db4"><span class="id" title="binder"><span id="d0f8eb3168c75a402facaa7a27c6d01d" class="id">ψ2</span></span></a> (<a id="Hin1:158" class="idref" href="#Hin1:158"><span class="id" title="binder"><span id="Hin1:166" class="id">Hin1</span></span></a> : <span class="id" title="definition">In</span> <a class="idref" href="Sequent.Environments.html#a2dda099cabe51a75c24c03ca9adfe62"><span class="id" title="variable">ψ1</span></a> <a class="idref" href="Sequent.Environments.html#13a2b26254ed035825bcd6dfd20cf204"><span class="id" title="variable">Γ'</span></a>) (<a id="Hin2:159" class="idref" href="#Hin2:159"><span class="id" title="binder"><span id="Hin2:167" class="id">Hin2</span></span></a> : <span class="id" title="definition">In</span> <a class="idref" href="Sequent.Environments.html#cd322b77ad61742f71035957436a8db4"><span class="id" title="variable">ψ2</span></a> <span class="id" title="var">Γ</span><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="Hin1':160" class="idref" href="#Hin1':160"><span class="id" title="binder"><span id="Hin1':168" class="id">Hin1'</span></span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="Hin2':161" class="idref" href="#Hin2':161"><span class="id" title="binder"><span id="Hin2':169" class="id">Hin2'</span></span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <span class="id" title="var">f</span> <a class="idref" href="Sequent.Environments.html#a2dda099cabe51a75c24c03ca9adfe62"><span class="id" title="variable">ψ1</span></a> <a class="idref" href="Sequent.Environments.html#cd322b77ad61742f71035957436a8db4"><span class="id" title="variable">ψ2</span></a> <a class="idref" href="Sequent.Environments.html#Hin1':160"><span class="id" title="variable">Hin1'</span></a> <a class="idref" href="Sequent.Environments.html#Hin2':161"><span class="id" title="variable">Hin2'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#in_map2_aux"><span class="id" title="definition">in_map2_aux</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">f</span> <a class="idref" href="Sequent.Environments.html#13a2b26254ed035825bcd6dfd20cf204"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="Sequent.Environments.html#fa0a4a93f30c670e9920a9c7523ffcee"><span class="id" title="variable">HΓ'</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}}</span></a>).<br/>
- <span class="id" title="tactic">induction</span> <span class="id" title="var">Γ'</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">HΓ'</span> ψ1' ψ2' <span class="id" title="var">Hin1'</span> <span class="id" title="var">Hin2'</span> ; [<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> (<span class="id" title="definition">decide</span> (ψ1' <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">destruct</span> (@<a class="idref" href="Sequent.Environments.html#in_map_in"><span class="id" title="lemma">in_map_in</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="notation">λ</span> <span class="id" title="notation">(</span><a id="b:170" class="idref" href="#b:170"><span class="id" title="binder"><span id="b:172" class="id">b</span></span></a> : <a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a>) (<a id="Hinb:171" class="idref" href="#Hinb:171"><span class="id" title="binder"><span id="Hinb:173" class="id">Hinb</span></span></a> : <a class="idref" href="Sequent.Environments.html#b:170"><span class="id" title="variable">b</span></a> <span class="id" title="notation">∈</span> <span class="id" title="var">Γ</span><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">f</span> ψ1' <a class="idref" href="Sequent.Environments.html#b:170"><span class="id" title="variable">b</span></a> (<a class="idref" href="Sequent.Environments.html#in_map2_aux_obligation_1"><span class="id" title="lemma">in_map2_aux_obligation_1</span></a> <span class="id" title="var">Γ</span> (ψ1' <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">Γ'</span>) <span class="id" title="var">HΓ'</span> ψ1' <span class="id" title="var">Γ'</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <a class="idref" href="Sequent.Environments.html#b:170"><span class="id" title="variable">b</span></a> <a class="idref" href="Sequent.Environments.html#Hinb:171"><span class="id" title="variable">Hinb</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Sequent.Environments.html#Hinb:171"><span class="id" title="variable">Hinb</span></a>) ψ2'). <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span> ; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eexists</span> ; <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">in_or_app</span> ; <span class="id" title="tactic">left</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span> ; <span class="id" title="tactic">exact</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">H0</span> : <span class="id" title="var">Γ'</span> <span class="id" title="notation">⊆</span> <span class="id" title="var">Γ</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">intros</span> <span class="id" title="var">z</span> <span class="id" title="var">Hz</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="var">HΓ'</span> ; <span class="id" title="tactic">right</span> ; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">edestruct</span> (<span class="id" title="var">IHΓ'</span> (<a class="idref" href="Sequent.Environments.html#in_map2_aux_obligation_2"><span class="id" title="lemma">in_map2_aux_obligation_2</span></a> <span class="id" title="var">Γ</span> (<span class="id" title="var">a</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">Γ'</span>) <span class="id" title="var">HΓ'</span> <span class="id" title="var">a</span> <span class="id" title="var">Γ'</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>) ψ1') ; <span class="id" title="tactic">auto</span> ; [ <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin1'</span> ; <span class="id" title="tactic">auto</span> ; <span class="id" title="var">exfalso</span> ; <span class="id" title="tactic">auto</span> | <span class="id" title="tactic">exact</span> <span class="id" title="var">Hin2'</span> | ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hin2''</span> &amp; <span class="id" title="var">H1</span>). <span class="id" title="tactic">eexists</span> ; <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">in_or_app</span> ; <span class="id" title="tactic">right</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H1</span>.<br/>
- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hcut</span> <span class="id" title="var">Γ</span> (<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Classes.RelationClasses.html#reflexivity"><span class="id" title="definition">reflexivity</span></a> <span class="id" title="var">Γ</span>) ψ1 ψ2) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hin'</span> <span class="id" title="var">Hprop</span>].<br/>
&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">Hin'</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hprop</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_map_empty" class="idref" href="#in_map_empty"><span class="id" title="lemma">in_map_empty</span></a> <a id="A:174" class="idref" href="#A:174"><span class="id" title="binder">A</span></a> <a id="f:175" class="idref" href="#f:175"><span class="id" title="binder">f</span></a> : @<a class="idref" href="Sequent.Environments.html#in_map"><span class="id" title="definition">in_map</span></a> <a class="idref" href="Sequent.Environments.html#A:174"><span class="id" title="variable">A</span></a> <span class="id" title="notation">[]</span> <a class="idref" href="Sequent.Environments.html#f:175"><span class="id" title="variable">f</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">[]</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_map_ext" class="idref" href="#in_map_ext"><span class="id" title="lemma">in_map_ext</span></a> {<a id="A:176" class="idref" href="#A:176"><span class="id" title="binder">A</span></a>} <a id="96ab57af289a116c61607735b6c1bce0" class="idref" href="#96ab57af289a116c61607735b6c1bce0"><span class="id" title="binder">Δ</span></a> <a id="f:178" class="idref" href="#f:178"><span class="id" title="binder">f</span></a> <a id="g:179" class="idref" href="#g:179"><span class="id" title="binder">g</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="6bac152cec15c49a478e72b6363d6ced" class="idref" href="#6bac152cec15c49a478e72b6363d6ced"><span class="id" title="binder">φ</span></a> <a id="H:181" class="idref" href="#H:181"><span class="id" title="binder">H</span></a><span class="id" title="notation">,</span> <a class="idref" href="Sequent.Environments.html#f:178"><span class="id" title="variable">f</span></a> <a class="idref" href="Sequent.Environments.html#6bac152cec15c49a478e72b6363d6ced"><span class="id" title="variable">φ</span></a> <a class="idref" href="Sequent.Environments.html#H:181"><span class="id" title="variable">H</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Sequent.Environments.html#g:179"><span class="id" title="variable">g</span></a> <a class="idref" href="Sequent.Environments.html#6bac152cec15c49a478e72b6363d6ced"><span class="id" title="variable">φ</span></a> <a class="idref" href="Sequent.Environments.html#H:181"><span class="id" title="variable">H</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> @<a class="idref" href="Sequent.Environments.html#in_map"><span class="id" title="definition">in_map</span></a> <a class="idref" href="Sequent.Environments.html#A:176"><span class="id" title="variable">A</span></a> <a class="idref" href="Sequent.Environments.html#96ab57af289a116c61607735b6c1bce0"><span class="id" title="variable">Δ</span></a> <a class="idref" href="Sequent.Environments.html#f:178"><span class="id" title="variable">f</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Sequent.Environments.html#in_map"><span class="id" title="definition">in_map</span></a> <a class="idref" href="Sequent.Environments.html#96ab57af289a116c61607735b6c1bce0"><span class="id" title="variable">Δ</span></a> <a class="idref" href="Sequent.Environments.html#g:179"><span class="id" title="variable">g</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Sequent.Environments.html#in_map"><span class="id" title="definition">in_map</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="notation">forall</span> <a id="74513af62dda40fc65c0991e979f48ea" class="idref" href="#74513af62dda40fc65c0991e979f48ea"><span class="id" title="binder"><span id="e1d284cf5abad24f47e1cbe9f62ccfc3" class="id">Γ</span></span></a> <a id="c94270536ebac7efebc48945c3556a11" class="idref" href="#c94270536ebac7efebc48945c3556a11"><span class="id" title="binder"><span id="6bca174214560e5cfa61c4d01f9e6e5d" class="id">HΓ</span></span></a><span class="id" title="notation">,</span> <a class="idref" href="Sequent.Environments.html#in_map_aux"><span class="id" title="definition">in_map_aux</span></a> <span class="id" title="var">Δ</span> <span class="id" title="var">f</span> <a class="idref" href="Sequent.Environments.html#74513af62dda40fc65c0991e979f48ea"><span class="id" title="variable">Γ</span></a>  <a class="idref" href="Sequent.Environments.html#c94270536ebac7efebc48945c3556a11"><span class="id" title="variable">HΓ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Sequent.Environments.html#in_map_aux"><span class="id" title="definition">in_map_aux</span></a> <span class="id" title="var">Δ</span> <span class="id" title="var">g</span> <a class="idref" href="Sequent.Environments.html#74513af62dda40fc65c0991e979f48ea"><span class="id" title="variable">Γ</span></a>  <a class="idref" href="Sequent.Environments.html#c94270536ebac7efebc48945c3556a11"><span class="id" title="variable">HΓ</span></a>); [|<span class="id" title="tactic">trivial</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">HΓ</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>, <span class="id" title="var">IHΓ</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_map2_ext" class="idref" href="#in_map2_ext"><span class="id" title="lemma">in_map2_ext</span></a> {<a id="A:186" class="idref" href="#A:186"><span class="id" title="binder">A</span></a>} <a id="b7d682e55ead81672f2aa5ffa2109a64" class="idref" href="#b7d682e55ead81672f2aa5ffa2109a64"><span class="id" title="binder">Δ</span></a> <a id="f:188" class="idref" href="#f:188"><span class="id" title="binder">f</span></a> <a id="g:189" class="idref" href="#g:189"><span class="id" title="binder">g</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="fd16858260bdb4f4014cee7bf1ad7fc6" class="idref" href="#fd16858260bdb4f4014cee7bf1ad7fc6"><span class="id" title="binder">φ</span></a> <a id="c1b8ded832a9ffa661c8af98e4340357" class="idref" href="#c1b8ded832a9ffa661c8af98e4340357"><span class="id" title="binder">ψ</span></a> <a id="b6e7a72b487f62627bfffba96b0b07c9" class="idref" href="#b6e7a72b487f62627bfffba96b0b07c9"><span class="id" title="binder">H</span></a><a id="b6e7a72b487f62627bfffba96b0b07c9" class="idref" href="#b6e7a72b487f62627bfffba96b0b07c9"><span class="id" title="binder">φ</span></a> <a id="30e95c0c86a2b06b969e193b09c5d25c" class="idref" href="#30e95c0c86a2b06b969e193b09c5d25c"><span class="id" title="binder">H</span></a><a id="30e95c0c86a2b06b969e193b09c5d25c" class="idref" href="#30e95c0c86a2b06b969e193b09c5d25c"><span class="id" title="binder">ψ</span></a><span class="id" title="notation">,</span> <a class="idref" href="Sequent.Environments.html#f:188"><span class="id" title="variable">f</span></a> <a class="idref" href="Sequent.Environments.html#fd16858260bdb4f4014cee7bf1ad7fc6"><span class="id" title="variable">φ</span></a> <a class="idref" href="Sequent.Environments.html#c1b8ded832a9ffa661c8af98e4340357"><span class="id" title="variable">ψ</span></a> <a class="idref" href="Sequent.Environments.html#b6e7a72b487f62627bfffba96b0b07c9"><span class="id" title="variable">H</span></a><a class="idref" href="Sequent.Environments.html#b6e7a72b487f62627bfffba96b0b07c9"><span class="id" title="variable">φ</span></a> <a class="idref" href="Sequent.Environments.html#30e95c0c86a2b06b969e193b09c5d25c"><span class="id" title="variable">H</span></a><a class="idref" href="Sequent.Environments.html#30e95c0c86a2b06b969e193b09c5d25c"><span class="id" title="variable">ψ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Sequent.Environments.html#g:189"><span class="id" title="variable">g</span></a> <a class="idref" href="Sequent.Environments.html#fd16858260bdb4f4014cee7bf1ad7fc6"><span class="id" title="variable">φ</span></a> <a class="idref" href="Sequent.Environments.html#c1b8ded832a9ffa661c8af98e4340357"><span class="id" title="variable">ψ</span></a> <a class="idref" href="Sequent.Environments.html#b6e7a72b487f62627bfffba96b0b07c9"><span class="id" title="variable">H</span></a><a class="idref" href="Sequent.Environments.html#b6e7a72b487f62627bfffba96b0b07c9"><span class="id" title="variable">φ</span></a> <a class="idref" href="Sequent.Environments.html#30e95c0c86a2b06b969e193b09c5d25c"><span class="id" title="variable">H</span></a><a class="idref" href="Sequent.Environments.html#30e95c0c86a2b06b969e193b09c5d25c"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> @<a class="idref" href="Sequent.Environments.html#in_map2"><span class="id" title="definition">in_map2</span></a> <a class="idref" href="Sequent.Environments.html#A:186"><span class="id" title="variable">A</span></a> <a class="idref" href="Sequent.Environments.html#b7d682e55ead81672f2aa5ffa2109a64"><span class="id" title="variable">Δ</span></a> <a class="idref" href="Sequent.Environments.html#f:188"><span class="id" title="variable">f</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Sequent.Environments.html#in_map2"><span class="id" title="definition">in_map2</span></a> <a class="idref" href="Sequent.Environments.html#b7d682e55ead81672f2aa5ffa2109a64"><span class="id" title="variable">Δ</span></a> <a class="idref" href="Sequent.Environments.html#g:189"><span class="id" title="variable">g</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Sequent.Environments.html#in_map2"><span class="id" title="definition">in_map2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="notation">forall</span> <a id="d60cca09333596614699de21d7139a5f" class="idref" href="#d60cca09333596614699de21d7139a5f"><span class="id" title="binder"><span id="0e542b5e41283602863de8f36ac43b3a" class="id">Γ</span></span></a> <a id="30e1f153a13b6a4da3fd07a589890324" class="idref" href="#30e1f153a13b6a4da3fd07a589890324"><span class="id" title="binder"><span id="9be3b9e7730af6f37593352dc4983f66" class="id">HΓ</span></span></a><span class="id" title="notation">,</span> <a class="idref" href="Sequent.Environments.html#in_map2_aux"><span class="id" title="definition">in_map2_aux</span></a> <span class="id" title="var">Δ</span> <span class="id" title="var">f</span> <a class="idref" href="Sequent.Environments.html#d60cca09333596614699de21d7139a5f"><span class="id" title="variable">Γ</span></a>  <a class="idref" href="Sequent.Environments.html#30e1f153a13b6a4da3fd07a589890324"><span class="id" title="variable">HΓ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Sequent.Environments.html#in_map2_aux"><span class="id" title="definition">in_map2_aux</span></a> <span class="id" title="var">Δ</span> <span class="id" title="var">g</span> <a class="idref" href="Sequent.Environments.html#d60cca09333596614699de21d7139a5f"><span class="id" title="variable">Γ</span></a>  <a class="idref" href="Sequent.Environments.html#30e1f153a13b6a4da3fd07a589890324"><span class="id" title="variable">HΓ</span></a>); [|<span class="id" title="tactic">trivial</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">HΓ</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">f_equal</span> ; [ | <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHΓ</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="Sequent.Environments.html#in_map_ext"><span class="id" title="lemma">in_map_ext</span></a> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="difference_singleton" class="idref" href="#difference_singleton"><span class="id" title="lemma">difference_singleton</span></a> (<a id="93f6336e81fff8ee2c80caf15acb00a7" class="idref" href="#93f6336e81fff8ee2c80caf15acb00a7"><span class="id" title="binder">Δ</span></a>: <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="46275254d503a9f30a7bd7f6f2b74710" class="idref" href="#46275254d503a9f30a7bd7f6f2b74710"><span class="id" title="binder">φ</span></a>: <a class="idref" href="Sequent.Environments.html#46275254d503a9f30a7bd7f6f2b74710"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#93f6336e81fff8ee2c80caf15acb00a7"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#93f6336e81fff8ee2c80caf15acb00a7"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">≡</span> <span class="id" title="notation">(</span><a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#93f6336e81fff8ee2c80caf15acb00a7"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="Sequent.Environments.html#46275254d503a9f30a7bd7f6f2b74710"><span class="id" title="variable">φ</span></a><span class="id" title="notation">]}</span><a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">)</span></a> <a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="Sequent.Environments.html#46275254d503a9f30a7bd7f6f2b74710"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">gmultiset_disj_union_difference</span> <span class="id" title="notation">{[</span>φ<span class="id" title="notation">]}</span>) <span class="id" title="tactic">at</span> 1. <span class="id" title="var">ms</span>.<br/>
<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_singleton_subseteq_l</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_in_add" class="idref" href="#env_in_add"><span class="id" title="lemma">env_in_add</span></a> (<a id="3405cf8e408305b2d6f3415e2162f387" class="idref" href="#3405cf8e408305b2d6f3415e2162f387"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="9cf2397a7353035af8d4f810fb2fbeb9" class="idref" href="#9cf2397a7353035af8d4f810fb2fbeb9"><span class="id" title="binder">ϕ</span></a> <a id="f993366e27ba6b881923526615d3dcc1" class="idref" href="#f993366e27ba6b881923526615d3dcc1"><span class="id" title="binder">φ</span></a>: <a class="idref" href="Sequent.Environments.html#f993366e27ba6b881923526615d3dcc1"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="Sequent.Environments.html#3405cf8e408305b2d6f3415e2162f387"><span class="id" title="variable">Δ</span></a> <a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="Sequent.Environments.html#9cf2397a7353035af8d4f810fb2fbeb9"><span class="id" title="variable">ϕ</span></a><span class="id" title="notation">)</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#f993366e27ba6b881923526615d3dcc1"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Sequent.Environments.html#9cf2397a7353035af8d4f810fb2fbeb9"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="Sequent.Environments.html#f993366e27ba6b881923526615d3dcc1"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#3405cf8e408305b2d6f3415e2162f387"><span class="id" title="variable">Δ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">gmultiset_elem_of_disj_union</span> <span class="id" title="var">Δ</span>), <span class="id" title="lemma">gmultiset_elem_of_singleton</span>.<br/>
<span class="id" title="tactic">tauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="equiv_disj_union_compat_r" class="idref" href="#equiv_disj_union_compat_r"><span class="id" title="lemma">equiv_disj_union_compat_r</span></a> {<a id="707dfd54e9abe5544f225ef0ca334aef" class="idref" href="#707dfd54e9abe5544f225ef0ca334aef"><span class="id" title="binder">Δ</span></a> <a id="94c7d1e3e562b9e5eb387d8f76f8c00d" class="idref" href="#94c7d1e3e562b9e5eb387d8f76f8c00d"><span class="id" title="binder">Δ'</span></a> <a id="bd92143d65a5c72af6c0ade9f7e5e3f7" class="idref" href="#bd92143d65a5c72af6c0ade9f7e5e3f7"><span class="id" title="binder">Δ''</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>} : <a class="idref" href="Sequent.Environments.html#707dfd54e9abe5544f225ef0ca334aef"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">≡</span> <a class="idref" href="Sequent.Environments.html#bd92143d65a5c72af6c0ade9f7e5e3f7"><span class="id" title="variable">Δ''</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#707dfd54e9abe5544f225ef0ca334aef"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="Sequent.Environments.html#94c7d1e3e562b9e5eb387d8f76f8c00d"><span class="id" title="variable">Δ'</span></a> <span class="id" title="notation">≡</span> <a class="idref" href="Sequent.Environments.html#bd92143d65a5c72af6c0ade9f7e5e3f7"><span class="id" title="variable">Δ''</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="Sequent.Environments.html#94c7d1e3e562b9e5eb387d8f76f8c00d"><span class="id" title="variable">Δ'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="equiv_disj_union_compat_l" class="idref" href="#equiv_disj_union_compat_l"><span class="id" title="lemma">equiv_disj_union_compat_l</span></a> {<a id="e1931aaf4589155c4f591d340f69fae8" class="idref" href="#e1931aaf4589155c4f591d340f69fae8"><span class="id" title="binder">Δ</span></a> <a id="09f0a95c4f278ea043292ad3fa4b815b" class="idref" href="#09f0a95c4f278ea043292ad3fa4b815b"><span class="id" title="binder">Δ'</span></a> <a id="2c38fc1054f0c698370bc0b8bf13d787" class="idref" href="#2c38fc1054f0c698370bc0b8bf13d787"><span class="id" title="binder">Δ''</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>} : <a class="idref" href="Sequent.Environments.html#e1931aaf4589155c4f591d340f69fae8"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">≡</span> <a class="idref" href="Sequent.Environments.html#2c38fc1054f0c698370bc0b8bf13d787"><span class="id" title="variable">Δ''</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#09f0a95c4f278ea043292ad3fa4b815b"><span class="id" title="variable">Δ'</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="Sequent.Environments.html#e1931aaf4589155c4f591d340f69fae8"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">≡</span> <a class="idref" href="Sequent.Environments.html#09f0a95c4f278ea043292ad3fa4b815b"><span class="id" title="variable">Δ'</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="Sequent.Environments.html#2c38fc1054f0c698370bc0b8bf13d787"><span class="id" title="variable">Δ''</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_add_comm" class="idref" href="#env_add_comm"><span class="id" title="lemma">env_add_comm</span></a> (<a id="962eba73e4ae12411772b74c39839fab" class="idref" href="#962eba73e4ae12411772b74c39839fab"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="bc84a5e32bc7f48df597a58b30bca812" class="idref" href="#bc84a5e32bc7f48df597a58b30bca812"><span class="id" title="binder">φ</span></a> <a id="125560d667628c7d45a0c41e427314a5" class="idref" href="#125560d667628c7d45a0c41e427314a5"><span class="id" title="binder">ϕ</span></a> : <span class="id" title="notation">(</span><a class="idref" href="Sequent.Environments.html#962eba73e4ae12411772b74c39839fab"><span class="id" title="variable">Δ</span></a> <a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="Sequent.Environments.html#bc84a5e32bc7f48df597a58b30bca812"><span class="id" title="variable">φ</span></a> <a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="Sequent.Environments.html#125560d667628c7d45a0c41e427314a5"><span class="id" title="variable">ϕ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">≡</span> <span class="id" title="notation">(</span><a class="idref" href="Sequent.Environments.html#962eba73e4ae12411772b74c39839fab"><span class="id" title="variable">Δ</span></a> <a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="Sequent.Environments.html#125560d667628c7d45a0c41e427314a5"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="Sequent.Environments.html#bc84a5e32bc7f48df597a58b30bca812"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_difference" class="idref" href="#in_difference"><span class="id" title="lemma">in_difference</span></a> (<a id="620d526049feb2958989af270d0b8a02" class="idref" href="#620d526049feb2958989af270d0b8a02"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="bba34f20cf25aef66479b20c2c650241" class="idref" href="#bba34f20cf25aef66479b20c2c650241"><span class="id" title="binder">φ</span></a> <a id="35ce8f24c666a66cb7ca94095f6340c6" class="idref" href="#35ce8f24c666a66cb7ca94095f6340c6"><span class="id" title="binder">ψ</span></a> : <a class="idref" href="Sequent.Environments.html#bba34f20cf25aef66479b20c2c650241"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">≠</span> <a class="idref" href="Sequent.Environments.html#35ce8f24c666a66cb7ca94095f6340c6"><span class="id" title="variable">ψ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#bba34f20cf25aef66479b20c2c650241"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#620d526049feb2958989af270d0b8a02"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#bba34f20cf25aef66479b20c2c650241"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#620d526049feb2958989af270d0b8a02"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="Sequent.Environments.html#35ce8f24c666a66cb7ca94095f6340c6"><span class="id" title="variable">ψ</span></a><span class="id" title="notation">]}</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">Hne</span> <span class="id" title="var">Hin</span>.<br/>
<span class="id" title="tactic">unfold</span> <span class="id" title="definition">elem_of</span>, <span class="id" title="instance">gmultiset_elem_of</span>.<br/>
<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">multiplicity_difference</span> <span class="id" title="var">Δ</span> <span class="id" title="notation">{[</span>ψ<span class="id" title="notation">]}</span> φ).<br/>
<span class="id" title="tactic">assert</span>( <span class="id" title="var">HH</span> := <span class="id" title="lemma">multiplicity_singleton_ne</span> φ ψ <span class="id" title="var">Hne</span>).<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="Sequent.Environments.html#singletonMS"><span class="id" title="instance">singletonMS</span></a>, <span class="id" title="definition">base.singletonMS</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HH</span>.<br/>
<span class="id" title="tactic">unfold</span> <span class="id" title="definition">base.singleton</span>, <a class="idref" href="Sequent.Environments.html#singleton"><span class="id" title="instance">Environments.singleton</span></a>. <span class="id" title="var">ms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">in_difference</span> : <span class="id" title="var">multiset</span>.<br/>

<br/>
<span class="comment">(*&nbsp;could&nbsp;be&nbsp;used&nbsp;in&nbsp;disj_inv&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="env_add_inv" class="idref" href="#env_add_inv"><span class="id" title="lemma">env_add_inv</span></a> (<a id="28c45abaa76414f8959c23cb3a19ee26" class="idref" href="#28c45abaa76414f8959c23cb3a19ee26"><span class="id" title="binder">Γ</span></a> <a id="cfce6762b71ef9c2a8cf75e919717ae6" class="idref" href="#cfce6762b71ef9c2a8cf75e919717ae6"><span class="id" title="binder">Γ'</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="9fa45110e13f887cbee15cf93d82361a" class="idref" href="#9fa45110e13f887cbee15cf93d82361a"><span class="id" title="binder">φ</span></a> <a id="2e1565dc48c71fed1bd5552498e8e4f9" class="idref" href="#2e1565dc48c71fed1bd5552498e8e4f9"><span class="id" title="binder">ψ</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="Sequent.Environments.html#9fa45110e13f887cbee15cf93d82361a"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">≠</span> <a class="idref" href="Sequent.Environments.html#2e1565dc48c71fed1bd5552498e8e4f9"><span class="id" title="variable">ψ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">(</span><a class="idref" href="Sequent.Environments.html#28c45abaa76414f8959c23cb3a19ee26"><span class="id" title="variable">Γ</span></a> <a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="Sequent.Environments.html#9fa45110e13f887cbee15cf93d82361a"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">≡</span> <span class="id" title="notation">(</span><a class="idref" href="Sequent.Environments.html#cfce6762b71ef9c2a8cf75e919717ae6"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="Sequent.Environments.html#2e1565dc48c71fed1bd5552498e8e4f9"><span class="id" title="variable">ψ</span></a><span class="id" title="notation">)</span><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#cfce6762b71ef9c2a8cf75e919717ae6"><span class="id" title="variable">Γ'</span></a> <span class="id" title="notation">≡</span>  <span class="id" title="notation">(</span><a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#28c45abaa76414f8959c23cb3a19ee26"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="Sequent.Environments.html#2e1565dc48c71fed1bd5552498e8e4f9"><span class="id" title="variable">ψ</span></a><span class="id" title="notation">]}</span><a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">)</span></a> <a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="Sequent.Environments.html#9fa45110e13f887cbee15cf93d82361a"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">Hneq</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Sequent.Environments.html#env_replace"><span class="id" title="lemma">env_replace</span></a>.<br/>
- <span class="id" title="var">ms</span>.<br/>
- <span class="id" title="tactic">assert</span>(ψ <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><span class="id" title="var">Γ</span> <a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ<span class="id" title="notation">)</span>); [<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>|]; <span class="id" title="var">ms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_add_inv'" class="idref" href="#env_add_inv'"><span class="id" title="lemma">env_add_inv'</span></a> (<a id="68ffce6da5f91c7a770f257ed37726e8" class="idref" href="#68ffce6da5f91c7a770f257ed37726e8"><span class="id" title="binder">Γ</span></a> <a id="26ec5f1cd6c658d0154370f6a694e747" class="idref" href="#26ec5f1cd6c658d0154370f6a694e747"><span class="id" title="binder">Γ'</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="4d41888d858360484183a8b0fc4ffaa2" class="idref" href="#4d41888d858360484183a8b0fc4ffaa2"><span class="id" title="binder">φ</span></a>: <span class="id" title="notation">(</span><a class="idref" href="Sequent.Environments.html#68ffce6da5f91c7a770f257ed37726e8"><span class="id" title="variable">Γ</span></a> <a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="Sequent.Environments.html#4d41888d858360484183a8b0fc4ffaa2"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">≡</span> <a class="idref" href="Sequent.Environments.html#26ec5f1cd6c658d0154370f6a694e747"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#68ffce6da5f91c7a770f257ed37726e8"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">≡</span>  <span class="id" title="notation">(</span><a class="idref" href="Sequent.Environments.html#26ec5f1cd6c658d0154370f6a694e747"><span class="id" title="variable">Γ'</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="Sequent.Environments.html#4d41888d858360484183a8b0fc4ffaa2"><span class="id" title="variable">φ</span></a><span class="id" title="notation">]}</span><span class="id" title="notation">)</span><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">Heq</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_equiv_eq" class="idref" href="#env_equiv_eq"><span class="id" title="lemma">env_equiv_eq</span></a> (<a id="e194544984d509fe6685cd07f6cd59c5" class="idref" href="#e194544984d509fe6685cd07f6cd59c5"><span class="id" title="binder">Γ</span></a> <a id="91554cc0f3022d925ac990c2c1cf4772" class="idref" href="#91554cc0f3022d925ac990c2c1cf4772"><span class="id" title="binder">Γ'</span></a> :<a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) : <a class="idref" href="Sequent.Environments.html#e194544984d509fe6685cd07f6cd59c5"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a>  <a class="idref" href="Sequent.Environments.html#91554cc0f3022d925ac990c2c1cf4772"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#e194544984d509fe6685cd07f6cd59c5"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">≡</span>  <a class="idref" href="Sequent.Environments.html#91554cc0f3022d925ac990c2c1cf4772"><span class="id" title="variable">Γ'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">trivial</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;reprove&nbsp;the&nbsp;following&nbsp;principles,&nbsp;proved&nbsp;in&nbsp;stdpp&nbsp;for&nbsp;Prop,&nbsp;but<br/>
&nbsp;&nbsp;&nbsp;we&nbsp;need&nbsp;them&nbsp;in&nbsp;Type&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="gmultiset_choose_or_empty" class="idref" href="#gmultiset_choose_or_empty"><span class="id" title="lemma">gmultiset_choose_or_empty</span></a> (<a id="X:224" class="idref" href="#X:224"><span class="id" title="binder">X</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) : <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="x:225" class="idref" href="#x:225"><span class="id" title="binder">x</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="Sequent.Environments.html#x:225"><span class="id" title="variable">x</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#X:224"><span class="id" title="variable">X</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#53e8e3b7ca0342c8b99a777b3c5faf3a"><span class="id" title="notation">+</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#53e8e3b7ca0342c8b99a777b3c5faf3a"><span class="id" title="notation">{</span></a><a class="idref" href="Sequent.Environments.html#X:224"><span class="id" title="variable">X</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">∅</span><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#53e8e3b7ca0342c8b99a777b3c5faf3a"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">elements</span> <span class="id" title="var">X</span>) <span class="id" title="keyword">as</span> [|<span class="id" title="var">x</span> <span class="id" title="var">l</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">HX</span>; [<span class="id" title="tactic">right</span>|<span class="id" title="tactic">left</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elements_empty_inv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="lemma">gmultiset_elem_of_elements</span> <span class="id" title="var">x</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="definition">elements</span> <span class="id" title="var">X</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span>). <span class="id" title="tactic">left</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;We&nbsp;need&nbsp;this&nbsp;induction&nbsp;principle&nbsp;in&nbsp;type.&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="gmultiset_rec" class="idref" href="#gmultiset_rec"><span class="id" title="lemma">gmultiset_rec</span></a> (<a id="P:226" class="idref" href="#P:226"><span class="id" title="binder">P</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">Type</span>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Sequent.Environments.html#P:226"><span class="id" title="variable">P</span></a> <span class="id" title="notation">∅</span> <span class="id" title="notation">→</span> <span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="x:227" class="idref" href="#x:227"><span class="id" title="binder">x</span></a> <a id="X:228" class="idref" href="#X:228"><span class="id" title="binder">X</span></a><span class="id" title="notation">,</span> <a class="idref" href="Sequent.Environments.html#P:226"><span class="id" title="variable">P</span></a> <a class="idref" href="Sequent.Environments.html#X:228"><span class="id" title="variable">X</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequent.Environments.html#P:226"><span class="id" title="variable">P</span></a> (<span class="id" title="notation">{[+</span> <a class="idref" href="Sequent.Environments.html#x:227"><span class="id" title="variable">x</span></a> <span class="id" title="notation">+]}</span> <span class="id" title="notation">⊎</span> <a class="idref" href="Sequent.Environments.html#X:228"><span class="id" title="variable">X</span></a>)<span class="id" title="notation">)</span> <span class="id" title="notation">→</span> <span class="id" title="notation">∀</span> <a id="X:229" class="idref" href="#X:229"><span class="id" title="binder">X</span></a><span class="id" title="notation">,</span> <a class="idref" href="Sequent.Environments.html#P:226"><span class="id" title="variable">P</span></a> <a class="idref" href="Sequent.Environments.html#X:229"><span class="id" title="variable">X</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hemp</span> <span class="id" title="var">Hinsert</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">induction</span> (<span class="id" title="lemma">gmultiset_wf</span> <span class="id" title="var">X</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">IH</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Sequent.Environments.html#gmultiset_choose_or_empty"><span class="id" title="lemma">gmultiset_choose_or_empty</span></a> <span class="id" title="var">X</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">x</span> <span class="id" title="var">Hx</span>]| -&gt;]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">gmultiset_disj_union_difference'</span> <span class="id" title="var">x</span> <span class="id" title="var">X</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hinsert</span>, <span class="id" title="var">IH</span>; <span class="id" title="var">multiset_solver</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="difference_include" class="idref" href="#difference_include"><span class="id" title="lemma">difference_include</span></a> <a id="ec781e3b22f50a7083220aff0959254f" class="idref" href="#ec781e3b22f50a7083220aff0959254f"><span class="id" title="binder">θ</span></a> <a id="58d838ec3e71167fe661aaebde3cc65a" class="idref" href="#58d838ec3e71167fe661aaebde3cc65a"><span class="id" title="binder">θ'</span></a> (<a id="13401cccc760edd17b59c8598c56b5b3" class="idref" href="#13401cccc760edd17b59c8598c56b5b3"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#58d838ec3e71167fe661aaebde3cc65a"><span class="id" title="variable">θ'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#13401cccc760edd17b59c8598c56b5b3"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Sequent.Environments.html#ec781e3b22f50a7083220aff0959254f"><span class="id" title="variable">θ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#13401cccc760edd17b59c8598c56b5b3"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="Sequent.Environments.html#58d838ec3e71167fe661aaebde3cc65a"><span class="id" title="variable">θ'</span></a><span class="id" title="notation">]}</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#ec781e3b22f50a7083220aff0959254f"><span class="id" title="variable">θ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#13401cccc760edd17b59c8598c56b5b3"><span class="id" title="variable">Δ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">Hin'</span> <span class="id" title="var">Hin</span>.<br/>
<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">gmultiset_disj_union_difference</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">X</span> := <span class="id" title="notation">{[</span><span class="id" title="var">θ'</span><span class="id" title="notation">]}</span>).<br/>
- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elem_of_disj_union</span>. <span class="id" title="tactic">tauto</span>.<br/>
- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_singleton_subseteq_l</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="rm" class="idref" href="#rm"><span class="id" title="definition">rm</span></a> <a id="x:233" class="idref" href="#x:233"><span class="id" title="binder">x</span></a> <a id="l:234" class="idref" href="#l:234"><span class="id" title="binder">l</span></a> := <span class="id" title="keyword">match</span> <a class="idref" href="Sequent.Environments.html#l:234"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
| <span class="id" title="var">h</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">t</span> =&gt; <span class="id" title="keyword">if</span> <a class="idref" href="Sequent.syntax_facts.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> <a class="idref" href="Sequent.Environments.html#x:233"><span class="id" title="variable">x</span></a> <span class="id" title="var">h</span> <span class="id" title="keyword">then</span> <span class="id" title="var">t</span> <span class="id" title="keyword">else</span> <span class="id" title="var">h</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="Sequent.Environments.html#rm:235"><span class="id" title="definition">rm</span></a> <a class="idref" href="Sequent.Environments.html#x:233"><span class="id" title="variable">x</span></a> <span class="id" title="var">t</span><br/>
| <span class="id" title="notation">[]</span> =&gt; <span class="id" title="notation">[]</span><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rm_comm" class="idref" href="#rm_comm"><span class="id" title="lemma">rm_comm</span></a> <a id="l:237" class="idref" href="#l:237"><span class="id" title="binder">l</span></a> <a id="x:238" class="idref" href="#x:238"><span class="id" title="binder">x</span></a> <a id="y:239" class="idref" href="#y:239"><span class="id" title="binder">y</span></a> : <a class="idref" href="Sequent.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="Sequent.Environments.html#x:238"><span class="id" title="variable">x</span></a> (<a class="idref" href="Sequent.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="Sequent.Environments.html#y:239"><span class="id" title="variable">y</span></a> <a class="idref" href="Sequent.Environments.html#l:237"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Sequent.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="Sequent.Environments.html#y:239"><span class="id" title="variable">y</span></a> (<a class="idref" href="Sequent.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="Sequent.Environments.html#x:238"><span class="id" title="variable">x</span></a> <a class="idref" href="Sequent.Environments.html#l:237"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> ; <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">destruct</span> <a class="idref" href="Sequent.syntax_facts.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> ; <span class="id" title="tactic">subst</span> ; <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">destruct</span> <a class="idref" href="Sequent.syntax_facts.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> ; [<span class="id" title="tactic">auto</span> | <span class="id" title="var">contradiction</span>].<br/>
- <span class="id" title="tactic">destruct</span> <a class="idref" href="Sequent.syntax_facts.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> ; [<span class="id" title="tactic">auto</span> | <span class="id" title="var">contradiction</span>].<br/>
- <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">destruct</span> <a class="idref" href="Sequent.syntax_facts.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> ; <span class="id" title="tactic">subst</span> ; <span class="id" title="tactic">auto</span> ; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_rm" class="idref" href="#in_rm"><span class="id" title="lemma">in_rm</span></a> <a id="l:240" class="idref" href="#l:240"><span class="id" title="binder">l</span></a> <a id="x:241" class="idref" href="#x:241"><span class="id" title="binder">x</span></a> <a id="y:242" class="idref" href="#y:242"><span class="id" title="binder">y</span></a>: <span class="id" title="definition">In</span> <a class="idref" href="Sequent.Environments.html#x:241"><span class="id" title="variable">x</span></a> (<a class="idref" href="Sequent.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="Sequent.Environments.html#y:242"><span class="id" title="variable">y</span></a> <a class="idref" href="Sequent.Environments.html#l:240"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="definition">In</span> <a class="idref" href="Sequent.Environments.html#x:241"><span class="id" title="variable">x</span></a> <a class="idref" href="Sequent.Environments.html#l:240"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">tauto</span>.<br/>
<span class="id" title="tactic">destruct</span> <a class="idref" href="Sequent.syntax_facts.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a>. <span class="id" title="tactic">tauto</span>. <span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_in_rm" class="idref" href="#in_in_rm"><span class="id" title="lemma">in_in_rm</span></a> <a id="l:243" class="idref" href="#l:243"><span class="id" title="binder">l</span></a> <a id="x:244" class="idref" href="#x:244"><span class="id" title="binder">x</span></a> <a id="y:245" class="idref" href="#y:245"><span class="id" title="binder">y</span></a>: <a class="idref" href="Sequent.Environments.html#x:244"><span class="id" title="variable">x</span></a> <span class="id" title="notation">≠</span> <a class="idref" href="Sequent.Environments.html#y:245"><span class="id" title="variable">y</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="definition">In</span> <a class="idref" href="Sequent.Environments.html#x:244"><span class="id" title="variable">x</span></a> <a class="idref" href="Sequent.Environments.html#l:243"><span class="id" title="variable">l</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="definition">In</span> <a class="idref" href="Sequent.Environments.html#x:244"><span class="id" title="variable">x</span></a> (<a class="idref" href="Sequent.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="Sequent.Environments.html#y:245"><span class="id" title="variable">y</span></a> <a class="idref" href="Sequent.Environments.html#l:243"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> ; <span class="id" title="tactic">subst</span> ; <span class="id" title="tactic">destruct</span> <a class="idref" href="Sequent.syntax_facts.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> ; <span class="id" title="tactic">subst</span> ; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span> ; <span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="remove_include" class="idref" href="#remove_include"><span class="id" title="lemma">remove_include</span></a> <a id="694f9b919e313e1cc803379785272391" class="idref" href="#694f9b919e313e1cc803379785272391"><span class="id" title="binder">θ</span></a> <a id="a3f3edc2e7faba2c9062e2eb36f75d67" class="idref" href="#a3f3edc2e7faba2c9062e2eb36f75d67"><span class="id" title="binder">θ'</span></a> <a id="7be3cc8f3c941ae01835a77deb3fe2de" class="idref" href="#7be3cc8f3c941ae01835a77deb3fe2de"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#a3f3edc2e7faba2c9062e2eb36f75d67"><span class="id" title="variable">θ'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#7be3cc8f3c941ae01835a77deb3fe2de"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#694f9b919e313e1cc803379785272391"><span class="id" title="variable">θ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="Sequent.Environments.html#a3f3edc2e7faba2c9062e2eb36f75d67"><span class="id" title="variable">θ'</span></a> <a class="idref" href="Sequent.Environments.html#7be3cc8f3c941ae01835a77deb3fe2de"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#694f9b919e313e1cc803379785272391"><span class="id" title="variable">θ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#7be3cc8f3c941ae01835a77deb3fe2de"><span class="id" title="variable">Δ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Hin'</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">elem_of_list_In</span>, <a class="idref" href="Sequent.Environments.html#in_rm"><span class="id" title="lemma">in_rm</span></a>, <span class="id" title="lemma">elem_of_list_In</span>, <span class="id" title="var">Hin</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rm_notin" class="idref" href="#rm_notin"><span class="id" title="lemma">rm_notin</span></a> <a id="l:249" class="idref" href="#l:249"><span class="id" title="binder">l</span></a> <a id="5146765e2802cfe890500de6f81a21ca" class="idref" href="#5146765e2802cfe890500de6f81a21ca"><span class="id" title="binder">ψ</span></a> : <a class="idref" href="Sequent.Environments.html#5146765e2802cfe890500de6f81a21ca"><span class="id" title="variable">ψ</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="Sequent.Environments.html#l:249"><span class="id" title="variable">l</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="Sequent.Environments.html#5146765e2802cfe890500de6f81a21ca"><span class="id" title="variable">ψ</span></a> <a class="idref" href="Sequent.Environments.html#l:249"><span class="id" title="variable">l</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Sequent.Environments.html#l:249"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> ; <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="tactic">intro</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="Sequent.syntax_facts.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> ψ <span class="id" title="var">a</span>) ; <span class="id" title="tactic">subst</span>.<br/>
- <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">left</span> ; <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl</span>. <span class="id" title="tactic">intro</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">right</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;technical&nbsp;lemma&nbsp;:&nbsp;one&nbsp;can&nbsp;constructively&nbsp;find&nbsp;whether&nbsp;an&nbsp;environment&nbsp;contains<br/>
&nbsp;&nbsp;&nbsp;an&nbsp;element&nbsp;satisfying&nbsp;a&nbsp;decidable&nbsp;property&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="decide_in" class="idref" href="#decide_in"><span class="id" title="lemma">decide_in</span></a> (<a id="P:251" class="idref" href="#P:251"><span class="id" title="binder">P</span></a> : <span class="id" title="var">_</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) (<a id="365258889a716ee3b476220a4d0d0654" class="idref" href="#365258889a716ee3b476220a4d0d0654"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="b80b34ddae6b15f5a4407be3306fe1f4" class="idref" href="#b80b34ddae6b15f5a4407be3306fe1f4"><span class="id" title="binder">φ</span></a><span class="id" title="notation">,</span> <span class="id" title="class">Decision</span> (<a class="idref" href="Sequent.Environments.html#P:251"><span class="id" title="variable">P</span></a> <a class="idref" href="Sequent.Environments.html#b80b34ddae6b15f5a4407be3306fe1f4"><span class="id" title="variable">φ</span></a>)<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="a067332b9a50018d2a19253340c1d3fb" class="idref" href="#a067332b9a50018d2a19253340c1d3fb"><span class="id" title="binder">φ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#a067332b9a50018d2a19253340c1d3fb"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#365258889a716ee3b476220a4d0d0654"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="Sequent.Environments.html#P:251"><span class="id" title="variable">P</span></a> <a class="idref" href="Sequent.Environments.html#a067332b9a50018d2a19253340c1d3fb"><span class="id" title="variable">φ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#53e8e3b7ca0342c8b99a777b3c5faf3a"><span class="id" title="notation">+</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#53e8e3b7ca0342c8b99a777b3c5faf3a"><span class="id" title="notation">{</span></a><span class="id" title="notation">forall</span> <a id="6921e4a114189557be4eca5bf1e21ff9" class="idref" href="#6921e4a114189557be4eca5bf1e21ff9"><span class="id" title="binder">φ</span></a><span class="id" title="notation">,</span> <a class="idref" href="Sequent.Environments.html#6921e4a114189557be4eca5bf1e21ff9"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#365258889a716ee3b476220a4d0d0654"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">¬</span> <a class="idref" href="Sequent.Environments.html#P:251"><span class="id" title="variable">P</span></a> <a class="idref" href="Sequent.Environments.html#6921e4a114189557be4eca5bf1e21ff9"><span class="id" title="variable">φ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Specif.html#53e8e3b7ca0342c8b99a777b3c5faf3a"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">HP</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span> <span class="id" title="keyword">using</span> <a class="idref" href="Sequent.Environments.html#gmultiset_rec"><span class="id" title="lemma">gmultiset_rec</span></a>.<br/>
- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intros</span> φ <span class="id" title="var">H</span>φ; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>φ.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHΓ</span> <span class="id" title="keyword">as</span> [(φ&amp;<span class="id" title="var">H</span>φ) | <span class="id" title="var">HF</span>].<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">exists</span> φ. <span class="id" title="var">ms</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">case</span> (<span class="id" title="var">HP</span> <span class="id" title="var">x</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">Hx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">left</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="var">ms</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">ms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="union_difference_L" class="idref" href="#union_difference_L"><span class="id" title="lemma">union_difference_L</span></a> (<a id="960babd034b3c95a2d35ab2b43180f96" class="idref" href="#960babd034b3c95a2d35ab2b43180f96"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="d9c465818c2fa08aca8d0f89f4629dbd" class="idref" href="#d9c465818c2fa08aca8d0f89f4629dbd"><span class="id" title="binder">Δ</span></a> <a id="b1919c2cd408467287b82e8d6d9b9e05" class="idref" href="#b1919c2cd408467287b82e8d6d9b9e05"><span class="id" title="binder">ϕ</span></a>: <a class="idref" href="Sequent.Environments.html#b1919c2cd408467287b82e8d6d9b9e05"><span class="id" title="variable">ϕ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#960babd034b3c95a2d35ab2b43180f96"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">(</span><a class="idref" href="Sequent.Environments.html#960babd034b3c95a2d35ab2b43180f96"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="Sequent.Environments.html#d9c465818c2fa08aca8d0f89f4629dbd"><span class="id" title="variable">Δ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="Sequent.Environments.html#b1919c2cd408467287b82e8d6d9b9e05"><span class="id" title="variable">ϕ</span></a><span class="id" title="notation">]}</span> <span class="id" title="notation">≡</span> <a class="idref" href="Sequent.Environments.html#960babd034b3c95a2d35ab2b43180f96"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">∖</span><span class="id" title="notation">{[</span><a class="idref" href="Sequent.Environments.html#b1919c2cd408467287b82e8d6d9b9e05"><span class="id" title="variable">ϕ</span></a><span class="id" title="notation">]}</span> <span class="id" title="notation">⊎</span> <a class="idref" href="Sequent.Environments.html#d9c465818c2fa08aca8d0f89f4629dbd"><span class="id" title="variable">Δ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">pose</span> (<a class="idref" href="Sequent.Environments.html#difference_singleton"><span class="id" title="lemma">difference_singleton</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hin</span>). <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="union_difference_R" class="idref" href="#union_difference_R"><span class="id" title="lemma">union_difference_R</span></a> (<a id="cf4647f6852be2fb9d1b73c2322db9ec" class="idref" href="#cf4647f6852be2fb9d1b73c2322db9ec"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="6b499983cea4686cd33ff45e87b2de5f" class="idref" href="#6b499983cea4686cd33ff45e87b2de5f"><span class="id" title="binder">Δ</span></a> <a id="91674f928ebdad340aea07e26c207b0c" class="idref" href="#91674f928ebdad340aea07e26c207b0c"><span class="id" title="binder">ϕ</span></a>: <a class="idref" href="Sequent.Environments.html#91674f928ebdad340aea07e26c207b0c"><span class="id" title="variable">ϕ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#6b499983cea4686cd33ff45e87b2de5f"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">(</span><a class="idref" href="Sequent.Environments.html#cf4647f6852be2fb9d1b73c2322db9ec"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="Sequent.Environments.html#6b499983cea4686cd33ff45e87b2de5f"><span class="id" title="variable">Δ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="Sequent.Environments.html#91674f928ebdad340aea07e26c207b0c"><span class="id" title="variable">ϕ</span></a><span class="id" title="notation">]}</span> <span class="id" title="notation">≡</span> <a class="idref" href="Sequent.Environments.html#cf4647f6852be2fb9d1b73c2322db9ec"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">⊎</span> <span class="id" title="notation">(</span><a class="idref" href="Sequent.Environments.html#6b499983cea4686cd33ff45e87b2de5f"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">∖</span><span class="id" title="notation">{[</span><a class="idref" href="Sequent.Environments.html#91674f928ebdad340aea07e26c207b0c"><span class="id" title="variable">ϕ</span></a><span class="id" title="notation">]}</span><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">pose</span> (<a class="idref" href="Sequent.Environments.html#difference_singleton"><span class="id" title="lemma">difference_singleton</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hin</span>). <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="equiv_assoc" class="idref" href="#equiv_assoc"><span class="id" title="instance">equiv_assoc</span></a> : @<span class="id" title="class">Assoc</span> <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a> <span class="id" title="definition">equiv</span> <span class="id" title="definition">disj_union</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="proper_difference" class="idref" href="#proper_difference"><span class="id" title="instance">proper_difference</span></a> : <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="notation">(≡@{</span><a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="notation">(≡@{</span><a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span>) <span class="id" title="definition">difference</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">Γ'</span> <span class="id" title="var">Heq</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Heq'</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="var_not_in_env" class="idref" href="#var_not_in_env"><span class="id" title="definition">var_not_in_env</span></a> <a id="p:262" class="idref" href="#p:262"><span class="id" title="binder">p</span></a> (<a id="02151d678be8d7481bfac909123b53dd" class="idref" href="#02151d678be8d7481bfac909123b53dd"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>):=  (<span class="id" title="notation">∀</span> <a id="cbbe8128690e1088b52a263215db2bf9" class="idref" href="#cbbe8128690e1088b52a263215db2bf9"><span class="id" title="binder">φ0</span></a><span class="id" title="notation">,</span> <a class="idref" href="Sequent.Environments.html#cbbe8128690e1088b52a263215db2bf9"><span class="id" title="variable">φ0</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#02151d678be8d7481bfac909123b53dd"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">¬</span> <a class="idref" href="Sequent.syntax_facts.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="Sequent.Environments.html#p:262"><span class="id" title="variable">p</span></a> <a class="idref" href="Sequent.Environments.html#cbbe8128690e1088b52a263215db2bf9"><span class="id" title="variable">φ0</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab5"></a><h2 class="section">Tactics</h2>

</div>
<div class="code">
<span class="comment">(*&nbsp;helper&nbsp;tactic&nbsp;split&nbsp;cases&nbsp;given&nbsp;an&nbsp;assumption&nbsp;about&nbsp;belonging&nbsp;to&nbsp;a&nbsp;multiset&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Sequent.Environments.html#GeneralEnvironments"><span class="id" title="section">GeneralEnvironments</span></a>.<br/>

<br/>
<span class="id" title="keyword">Global Ltac</span> <span class="id" title="var">in_tac</span> :=<br/>
<span class="id" title="tactic">repeat</span><br/>
<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
| <span class="id" title="var">H</span> : ?<span class="id" title="var">θ</span>  <span class="id" title="notation">∈</span> <span class="id" title="notation">{[</span>?<span class="id" title="var">θ1</span><span class="id" title="notation">;</span> ?<span class="id" title="var">θ2</span><span class="id" title="notation">]}</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elem_of_union</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span>|<span class="id" title="var">H</span>]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">subst</span><br/>
| <span class="id" title="var">H</span> : ?<span class="id" title="var">θ</span> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span>?<span class="id" title="var">Δ</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span>?<span class="id" title="var">θ'</span><span class="id" title="notation">]}</span><span class="id" title="notation">)</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">apply</span> <a class="idref" href="Sequent.Environments.html#difference_include"><span class="id" title="lemma">difference_include</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">trivial</span><br/>
| <span class="id" title="var">H</span> : <span class="id" title="keyword">context</span> [?<span class="id" title="var">θ</span>  <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span>?<span class="id" title="var">d</span> <a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> ?<span class="id" title="var">θ2</span><span class="id" title="notation">)</span>] |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Sequent.Environments.html#env_in_add"><span class="id" title="lemma">env_in_add</span></a> <span class="id" title="var">d</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span>|<span class="id" title="var">H</span>]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">subst</span><br/>
| <span class="id" title="var">H</span> : <span class="id" title="keyword">context</span> [?<span class="id" title="var">θ</span> <span class="id" title="notation">∈</span> <span class="id" title="notation">{[</span> ?<span class="id" title="var">θ2</span> <span class="id" title="notation">]}</span>] |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">gmultiset_elem_of_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Global Hint Immediate</span> <span class="id" title="var">equiv_assoc</span> : <span class="id" title="var">proof</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="open_box" class="idref" href="#open_box"><span class="id" title="definition">open_box</span></a>  (<a id="4d9a241ff3891dcee7ea6dd01f21eb88" class="idref" href="#4d9a241ff3891dcee7ea6dd01f21eb88"><span class="id" title="binder">φ</span></a> : <a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a>) : <a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a> := <span class="id" title="keyword">match</span> <a class="idref" href="Sequent.Environments.html#4d9a241ff3891dcee7ea6dd01f21eb88"><span class="id" title="variable">φ</span></a> <span class="id" title="keyword">with</span><br/>
| <a class="idref" href="Syntax.im_syntax.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a> φ =&gt; <a class="idref" href="Sequent.Environments.html#4d9a241ff3891dcee7ea6dd01f21eb88"><span class="id" title="variable">φ</span></a><br/>
| φ =&gt; <a class="idref" href="Sequent.Environments.html#4d9a241ff3891dcee7ea6dd01f21eb88"><span class="id" title="variable">φ</span></a><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_box" class="idref" href="#is_box"><span class="id" title="definition">is_box</span></a> (<a id="7e3d4e7cb555b377816757bd947c2b62" class="idref" href="#7e3d4e7cb555b377816757bd947c2b62"><span class="id" title="binder">φ</span></a> : <a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a>) := <span class="id" title="keyword">match</span> <a class="idref" href="Sequent.Environments.html#7e3d4e7cb555b377816757bd947c2b62"><span class="id" title="variable">φ</span></a> <span class="id" title="keyword">with</span><br/>
| <a class="idref" href="Syntax.im_syntax.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;inefficient&nbsp;conversion&nbsp;from&nbsp;multisets&nbsp;to&nbsp;lists&nbsp;and&nbsp;back&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="open_boxes" class="idref" href="#open_boxes"><span class="id" title="definition">open_boxes</span></a>  (<a id="712547fc5951711867c35bbbb83e817a" class="idref" href="#712547fc5951711867c35bbbb83e817a"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">list_to_set_disj</span> (<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Sequent.Environments.html#open_box"><span class="id" title="definition">open_box</span></a> (<span class="id" title="definition">List.filter</span> <a class="idref" href="Sequent.Environments.html#is_box"><span class="id" title="definition">is_box</span></a> (<span class="id" title="definition">elements</span> <a class="idref" href="Sequent.Environments.html#712547fc5951711867c35bbbb83e817a"><span class="id" title="variable">Γ</span></a>))).<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="l_open_boxes" class="idref" href="#l_open_boxes"><span class="id" title="definition">l_open_boxes</span></a> (<a id="l:270" class="idref" href="#l:270"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a>) :=<br/>
<span class="id" title="keyword">match</span> <a class="idref" href="Sequent.Environments.html#l:270"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
| <span class="id" title="notation">[]</span> =&gt; <span class="id" title="notation">[]</span><br/>
| φ <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span> =&gt; <span class="id" title="keyword">match</span> φ <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Syntax.im_syntax.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a> ψ =&gt; ψ <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="Sequent.Environments.html#l_open_boxes:271"><span class="id" title="definition">l_open_boxes</span></a> <a class="idref" href="Sequent.Environments.html#l:270"><span class="id" title="variable">l</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="Sequent.Environments.html#l_open_boxes:271"><span class="id" title="definition">l_open_boxes</span></a> <a class="idref" href="Sequent.Environments.html#l:270"><span class="id" title="variable">l</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="l_open_boxes_rm" class="idref" href="#l_open_boxes_rm"><span class="id" title="lemma">l_open_boxes_rm</span></a> <a id="l:274" class="idref" href="#l:274"><span class="id" title="binder">l</span></a> <a id="a3476856af46f6862e3a2226c9d5a6d9" class="idref" href="#a3476856af46f6862e3a2226c9d5a6d9"><span class="id" title="binder">ϕ</span></a> : <a class="idref" href="Sequent.Environments.html#is_box"><span class="id" title="definition">is_box</span></a> <a class="idref" href="Sequent.Environments.html#a3476856af46f6862e3a2226c9d5a6d9"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#l_open_boxes"><span class="id" title="definition">l_open_boxes</span></a> (<a class="idref" href="Sequent.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="Sequent.Environments.html#a3476856af46f6862e3a2226c9d5a6d9"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Sequent.Environments.html#l:274"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Sequent.Environments.html#l_open_boxes"><span class="id" title="definition">l_open_boxes</span></a> <a class="idref" href="Sequent.Environments.html#l:274"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> ; <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="tactic">destruct</span> (<a class="idref" href="Sequent.syntax_facts.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> <span class="id" title="var">ϕ</span> <span class="id" title="var">a</span>).<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">auto</span> ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">e</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">discriminate</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">auto</span> ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> ; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="l_open_boxes_app" class="idref" href="#l_open_boxes_app"><span class="id" title="lemma">l_open_boxes_app</span></a> <a id="l0:276" class="idref" href="#l0:276"><span class="id" title="binder">l0</span></a> <a id="l1:277" class="idref" href="#l1:277"><span class="id" title="binder">l1</span></a> : <a class="idref" href="Sequent.Environments.html#l_open_boxes"><span class="id" title="definition">l_open_boxes</span></a> (<a class="idref" href="Sequent.Environments.html#l0:276"><span class="id" title="variable">l0</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="Sequent.Environments.html#l1:277"><span class="id" title="variable">l1</span></a>) <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Sequent.Environments.html#l_open_boxes"><span class="id" title="definition">l_open_boxes</span></a> <a class="idref" href="Sequent.Environments.html#l0:276"><span class="id" title="variable">l0</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="Sequent.Environments.html#l_open_boxes"><span class="id" title="definition">l_open_boxes</span></a> <a class="idref" href="Sequent.Environments.html#l1:277"><span class="id" title="variable">l1</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">revert</span> <span class="id" title="var">l1</span> ; <span class="id" title="tactic">induction</span> <span class="id" title="var">l0</span> ; <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> ; <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">l1</span>. <span class="id" title="tactic">f_equal</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="l_open_boxes_in" class="idref" href="#l_open_boxes_in"><span class="id" title="lemma">l_open_boxes_in</span></a> <a id="l:278" class="idref" href="#l:278"><span class="id" title="binder">l</span></a> <a id="228f256efa9aa804d8de1f47370c1ae0" class="idref" href="#228f256efa9aa804d8de1f47370c1ae0"><span class="id" title="binder">ϕ</span></a> : <a class="idref" href="Sequent.Environments.html#228f256efa9aa804d8de1f47370c1ae0"><span class="id" title="variable">ϕ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#l_open_boxes"><span class="id" title="definition">l_open_boxes</span></a> <a class="idref" href="Sequent.Environments.html#l:278"><span class="id" title="variable">l</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">(</span><a class="idref" href="Syntax.im_syntax.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a> <a class="idref" href="Sequent.Environments.html#228f256efa9aa804d8de1f47370c1ae0"><span class="id" title="variable">ϕ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#l:278"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> ; <span class="id" title="tactic">intro</span> <span class="id" title="var">H</span> ; [ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span> | ].<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> ; <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">auto</span>.<br/>
1-5,7: <span class="id" title="tactic">right</span> ; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">subst</span> ; [<span class="id" title="tactic">left</span> ; <span class="id" title="tactic">auto</span> | <span class="id" title="tactic">right</span> ; <span class="id" title="tactic">auto</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_l_open_boxes" class="idref" href="#in_l_open_boxes"><span class="id" title="lemma">in_l_open_boxes</span></a> <a id="l:280" class="idref" href="#l:280"><span class="id" title="binder">l</span></a> <a id="269fc9d1dee474a9353f8f3c2029367d" class="idref" href="#269fc9d1dee474a9353f8f3c2029367d"><span class="id" title="binder">ϕ</span></a> : <span class="id" title="notation">(</span><a class="idref" href="Syntax.im_syntax.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a> <a class="idref" href="Sequent.Environments.html#269fc9d1dee474a9353f8f3c2029367d"><span class="id" title="variable">ϕ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#l:280"><span class="id" title="variable">l</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#269fc9d1dee474a9353f8f3c2029367d"><span class="id" title="variable">ϕ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#l_open_boxes"><span class="id" title="definition">l_open_boxes</span></a> <a class="idref" href="Sequent.Environments.html#l:280"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> ; <span class="id" title="tactic">intro</span> <span class="id" title="var">H</span> ; [ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span> | ].<br/>
<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">subst</span> ; <span class="id" title="var">cbn</span> ; [ <span class="id" title="tactic">left</span> ; <span class="id" title="tactic">auto</span> | ].<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> ; <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="tactic">right</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="l_open_boxes_open_boxes_perm" class="idref" href="#l_open_boxes_open_boxes_perm"><span class="id" title="lemma">l_open_boxes_open_boxes_perm</span></a> <a id="l:282" class="idref" href="#l:282"><span class="id" title="binder">l</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Sequent.Environments.html#l_open_boxes"><span class="id" title="definition">l_open_boxes</span></a> <a class="idref" href="Sequent.Environments.html#l:282"><span class="id" title="variable">l</span></a> <span class="id" title="notation">≡ₚ</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Sequent.Environments.html#open_box"><span class="id" title="definition">open_box</span></a> (<span class="id" title="definition">List.filter</span> <a class="idref" href="Sequent.Environments.html#is_box"><span class="id" title="definition">is_box</span></a> <a class="idref" href="Sequent.Environments.html#l:282"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> ; <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> ; <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="open_boxes'" class="idref" href="#open_boxes'"><span class="id" title="definition">open_boxes'</span></a> (<a id="1cef8fae65681836677e61bf20b3d80a" class="idref" href="#1cef8fae65681836677e61bf20b3d80a"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">list_to_set_disj</span> (<a class="idref" href="Sequent.Environments.html#l_open_boxes"><span class="id" title="definition">l_open_boxes</span></a> (<span class="id" title="definition">elements</span> <a class="idref" href="Sequent.Environments.html#1cef8fae65681836677e61bf20b3d80a"><span class="id" title="variable">Γ</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="open_boxes_open_boxes'" class="idref" href="#open_boxes_open_boxes'"><span class="id" title="lemma">open_boxes_open_boxes'</span></a> (<a id="90ec968ecc7a2beab0aced42ad31d74e" class="idref" href="#90ec968ecc7a2beab0aced42ad31d74e"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) : <a class="idref" href="Sequent.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> <a class="idref" href="Sequent.Environments.html#90ec968ecc7a2beab0aced42ad31d74e"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Sequent.Environments.html#open_boxes'"><span class="id" title="definition">open_boxes'</span></a> <a class="idref" href="Sequent.Environments.html#90ec968ecc7a2beab0aced42ad31d74e"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="Sequent.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a>,<a class="idref" href="Sequent.Environments.html#open_boxes'"><span class="id" title="definition">open_boxes'</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
<span class="id" title="tactic">induction</span> (<span class="id" title="definition">elements</span> <span class="id" title="var">Γ</span>) ; <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="tactic">destruct</span> (<a class="idref" href="Sequent.Environments.html#is_box"><span class="id" title="definition">is_box</span></a> <span class="id" title="var">a</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> ; <span class="id" title="var">cbn</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E</span> ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span> ; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span> ; <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> ; <span class="id" title="var">cbn</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E</span> ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="324ee050da821ba5ae035c28136d140a" class="idref" href="#324ee050da821ba5ae035c28136d140a"><span class="id" title="notation">&quot;</span></a>⊙ φ" := (<a class="idref" href="Sequent.Environments.html#open_box"><span class="id" title="definition">open_box</span></a> φ) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 75).<br/>
<span class="id" title="keyword">Notation</span> <a id="ea7b322b05c6af494383fa784c2b0124" class="idref" href="#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">&quot;</span></a>⊗ Γ" := (<a class="idref" href="Sequent.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> <span class="id" title="var">Γ</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 75).<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="Modal" class="idref" href="#Modal"><span class="id" title="section">Modal</span></a>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="proper_open_boxes'" class="idref" href="#proper_open_boxes'"><span class="id" title="instance">proper_open_boxes'</span></a> : <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="notation">(≡@{</span><a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="notation">(≡@{</span><a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span>) <a class="idref" href="Sequent.Environments.html#open_boxes'"><span class="id" title="definition">open_boxes'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">Heq</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Heq'</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="proper_open_boxes" class="idref" href="#proper_open_boxes"><span class="id" title="instance">proper_open_boxes</span></a> : <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="notation">(≡@{</span><a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="notation">(≡@{</span><a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span>) <a class="idref" href="Sequent.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">Heq</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Heq'</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="open_boxes_empty" class="idref" href="#open_boxes_empty"><span class="id" title="lemma">open_boxes_empty</span></a> : <a class="idref" href="Sequent.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> <span class="id" title="notation">∅</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">∅</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Listfilter_Permutation" class="idref" href="#Listfilter_Permutation"><span class="id" title="lemma">Listfilter_Permutation</span></a> (<a id="P:285" class="idref" href="#P:285"><span class="id" title="binder">P</span></a> : <a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) <a id="l0:286" class="idref" href="#l0:286"><span class="id" title="binder">l0</span></a> <a id="l1:287" class="idref" href="#l1:287"><span class="id" title="binder">l1</span></a> : <a class="idref" href="Sequent.Environments.html#l0:286"><span class="id" title="variable">l0</span></a> <span class="id" title="notation">≡ₚ</span> <a class="idref" href="Sequent.Environments.html#l1:287"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="definition">List.filter</span> <a class="idref" href="Sequent.Environments.html#P:285"><span class="id" title="variable">P</span></a> <a class="idref" href="Sequent.Environments.html#l0:286"><span class="id" title="variable">l0</span></a> <span class="id" title="notation">≡ₚ</span> <span class="id" title="definition">List.filter</span> <a class="idref" href="Sequent.Environments.html#P:285"><span class="id" title="variable">P</span></a> <a class="idref" href="Sequent.Environments.html#l1:287"><span class="id" title="variable">l1</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">revert</span> <span class="id" title="var">l1</span> ; <span class="id" title="tactic">induction</span> <span class="id" title="var">l0</span> <span class="id" title="keyword">as</span> [ | <span class="id" title="var">x</span> <span class="id" title="var">l0</span> <span class="id" title="var">Hl0</span>].<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">l1</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Permutation_nil</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">subst</span> ; <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">l1</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="lemma">Permutation_vs_cons_inv</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">l1'</span> &amp; <span class="id" title="var">l1''</span> &amp; <span class="id" title="var">H0</span>) ; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">filter_app</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">Permutation_app_comm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">P</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">filter_app</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">Hl0</span> (<span class="id" title="var">l1''</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">l1'</span>)) ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">Permutation_middle</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Permutation_cons_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Permutation_app_comm</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">filter_app</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hl0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">Permutation_middle</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Permutation_cons_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Permutation_app_comm</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="filter_disj_union" class="idref" href="#filter_disj_union"><span class="id" title="lemma">filter_disj_union</span></a> (<a id="73cb89dd34ccc7f53c65747371fe789c" class="idref" href="#73cb89dd34ccc7f53c65747371fe789c"><span class="id" title="binder">Γ</span></a> <a id="77c652364ccfb11859de13cb73169abc" class="idref" href="#77c652364ccfb11859de13cb73169abc"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) (<a id="P:290" class="idref" href="#P:290"><span class="id" title="binder">P</span></a> : <a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="definition">List.filter</span> <a class="idref" href="Sequent.Environments.html#P:290"><span class="id" title="variable">P</span></a> (<span class="id" title="definition">elements</span> (<a class="idref" href="Sequent.Environments.html#73cb89dd34ccc7f53c65747371fe789c"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="Sequent.Environments.html#77c652364ccfb11859de13cb73169abc"><span class="id" title="variable">Δ</span></a>))<span class="id" title="notation">)</span> <span class="id" title="notation">≡ₚ</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><span class="id" title="definition">List.filter</span> <a class="idref" href="Sequent.Environments.html#P:290"><span class="id" title="variable">P</span></a> (<span class="id" title="definition">elements</span> <a class="idref" href="Sequent.Environments.html#73cb89dd34ccc7f53c65747371fe789c"><span class="id" title="variable">Γ</span></a>)<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><span class="id" title="definition">List.filter</span> <a class="idref" href="Sequent.Environments.html#P:290"><span class="id" title="variable">P</span></a> (<span class="id" title="definition">elements</span> <a class="idref" href="Sequent.Environments.html#77c652364ccfb11859de13cb73169abc"><span class="id" title="variable">Δ</span></a>)<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">pose</span> (<span class="id" title="lemma">gmultiset_elements_disj_union</span> <span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span>).<br/>
<span class="id" title="tactic">apply</span> (<a class="idref" href="Sequent.Environments.html#Listfilter_Permutation"><span class="id" title="lemma">Listfilter_Permutation</span></a> <span class="id" title="var">P</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">filter_app</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="open_boxes_disj_union" class="idref" href="#open_boxes_disj_union"><span class="id" title="lemma">open_boxes_disj_union</span></a> <a id="c6889a2b015118ed6d2074281f6762f0" class="idref" href="#c6889a2b015118ed6d2074281f6762f0"><span class="id" title="binder">Γ</span></a> <a id="c41f546b37cfd377807d9d414c2c2fad" class="idref" href="#c41f546b37cfd377807d9d414c2c2fad"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> (<a class="idref" href="Sequent.Environments.html#c6889a2b015118ed6d2074281f6762f0"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="Sequent.Environments.html#c41f546b37cfd377807d9d414c2c2fad"><span class="id" title="variable">Δ</span></a>)<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> <a class="idref" href="Sequent.Environments.html#c6889a2b015118ed6d2074281f6762f0"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="Sequent.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> <a class="idref" href="Sequent.Environments.html#c41f546b37cfd377807d9d414c2c2fad"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="Sequent.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Sequent.Environments.html#filter_disj_union"><span class="id" title="lemma">filter_disj_union</span></a>.<br/>
<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">map_app</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">list_to_set_disj_app</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="open_boxes_singleton_t" class="idref" href="#open_boxes_singleton_t"><span class="id" title="lemma">open_boxes_singleton_t</span></a> <a id="1457f45ea18173d5d417be1acc57e78f" class="idref" href="#1457f45ea18173d5d417be1acc57e78f"><span class="id" title="binder">φ</span></a> : <a class="idref" href="Sequent.Environments.html#is_box"><span class="id" title="definition">is_box</span></a> <a class="idref" href="Sequent.Environments.html#1457f45ea18173d5d417be1acc57e78f"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> <span class="id" title="notation">{[</span><a class="idref" href="Sequent.Environments.html#1457f45ea18173d5d417be1acc57e78f"><span class="id" title="variable">φ</span></a><span class="id" title="notation">]}</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">{[</span><a class="idref" href="Sequent.Environments.html#324ee050da821ba5ae035c28136d140a"><span class="id" title="notation">⊙</span></a> <a class="idref" href="Sequent.Environments.html#1457f45ea18173d5d417be1acc57e78f"><span class="id" title="variable">φ</span></a><span class="id" title="notation">]}</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>φ.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="Sequent.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a>.<br/>
<span class="id" title="tactic">assert</span> (<span class="id" title="var">HH</span> := <span class="id" title="lemma">gmultiset_elements_singleton</span> φ).<br/>
<span class="id" title="tactic">unfold</span> <span class="id" title="definition">elements</span>, <span class="id" title="definition">base.singletonMS</span>, <a class="idref" href="Sequent.Environments.html#singletonMS"><span class="id" title="instance">singletonMS</span></a>, <span class="id" title="definition">base.singleton</span>, <a class="idref" href="Sequent.Environments.html#singleton"><span class="id" title="instance">Environments.singleton</span></a> <span class="id" title="tactic">in</span> *.<br/>
<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HH</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>φ. <span class="id" title="var">ms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="open_boxes_singleton_f" class="idref" href="#open_boxes_singleton_f"><span class="id" title="lemma">open_boxes_singleton_f</span></a> <a id="b3e4d886c797d21c0cecb25b12f86830" class="idref" href="#b3e4d886c797d21c0cecb25b12f86830"><span class="id" title="binder">φ</span></a> : <a class="idref" href="Sequent.Environments.html#is_box"><span class="id" title="definition">is_box</span></a> <a class="idref" href="Sequent.Environments.html#b3e4d886c797d21c0cecb25b12f86830"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> <span class="id" title="notation">{[</span><a class="idref" href="Sequent.Environments.html#b3e4d886c797d21c0cecb25b12f86830"><span class="id" title="variable">φ</span></a><span class="id" title="notation">]}</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">∅</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>φ.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="Sequent.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a>.<br/>
<span class="id" title="tactic">assert</span> (<span class="id" title="var">HH</span> := <span class="id" title="lemma">gmultiset_elements_singleton</span> φ).<br/>
<span class="id" title="tactic">unfold</span> <span class="id" title="definition">elements</span>, <span class="id" title="definition">base.singletonMS</span>, <a class="idref" href="Sequent.Environments.html#singletonMS"><span class="id" title="instance">singletonMS</span></a>, <span class="id" title="definition">base.singleton</span>, <a class="idref" href="Sequent.Environments.html#singleton"><span class="id" title="instance">Environments.singleton</span></a> <span class="id" title="tactic">in</span> *.<br/>
<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HH</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>φ. <span class="id" title="var">ms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="open_boxes_add_t" class="idref" href="#open_boxes_add_t"><span class="id" title="lemma">open_boxes_add_t</span></a> (<a id="650d8606e8d060c2403a37901cccc7f8" class="idref" href="#650d8606e8d060c2403a37901cccc7f8"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="cb1a3abacb53cf56135e30c24fa78075" class="idref" href="#cb1a3abacb53cf56135e30c24fa78075"><span class="id" title="binder">φ</span></a> : <a class="idref" href="Sequent.Environments.html#is_box"><span class="id" title="definition">is_box</span></a> <a class="idref" href="Sequent.Environments.html#cb1a3abacb53cf56135e30c24fa78075"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Sequent.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#650d8606e8d060c2403a37901cccc7f8"><span class="id" title="variable">Γ</span></a> <a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="Sequent.Environments.html#cb1a3abacb53cf56135e30c24fa78075"><span class="id" title="variable">φ</span></a><a class="idref" href="Sequent.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">)</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Sequent.Environments.html#650d8606e8d060c2403a37901cccc7f8"><span class="id" title="variable">Γ</span></a> <a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="Sequent.Environments.html#324ee050da821ba5ae035c28136d140a"><span class="id" title="notation">⊙</span></a> <a class="idref" href="Sequent.Environments.html#cb1a3abacb53cf56135e30c24fa78075"><span class="id" title="variable">φ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>φ.<br/>
<span class="id" title="tactic">rewrite</span> <a class="idref" href="Sequent.Environments.html#open_boxes_disj_union"><span class="id" title="lemma">open_boxes_disj_union</span></a>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="Sequent.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Sequent.Environments.html#open_boxes_singleton_t"><span class="id" title="lemma">open_boxes_singleton_t</span></a> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="open_boxes_add_f" class="idref" href="#open_boxes_add_f"><span class="id" title="lemma">open_boxes_add_f</span></a> (<a id="34867abd7a4a93abc69c8a731ea43aeb" class="idref" href="#34867abd7a4a93abc69c8a731ea43aeb"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="7e91bd093549c8594a2f205c861eac6a" class="idref" href="#7e91bd093549c8594a2f205c861eac6a"><span class="id" title="binder">φ</span></a> : <a class="idref" href="Sequent.Environments.html#is_box"><span class="id" title="definition">is_box</span></a> <a class="idref" href="Sequent.Environments.html#7e91bd093549c8594a2f205c861eac6a"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Sequent.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#34867abd7a4a93abc69c8a731ea43aeb"><span class="id" title="variable">Γ</span></a> <a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="Sequent.Environments.html#7e91bd093549c8594a2f205c861eac6a"><span class="id" title="variable">φ</span></a><a class="idref" href="Sequent.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">)</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Sequent.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Sequent.Environments.html#34867abd7a4a93abc69c8a731ea43aeb"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>φ.<br/>
<span class="id" title="tactic">rewrite</span> <a class="idref" href="Sequent.Environments.html#open_boxes_disj_union"><span class="id" title="lemma">open_boxes_disj_union</span></a>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="Sequent.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a>.<br/>
<span class="id" title="tactic">unfold</span> <span class="id" title="definition">elements</span>, <span class="id" title="definition">base.singletonMS</span>, <a class="idref" href="Sequent.Environments.html#singletonMS"><span class="id" title="instance">singletonMS</span></a>, <span class="id" title="definition">base.singleton</span>, <a class="idref" href="Sequent.Environments.html#singleton"><span class="id" title="instance">Environments.singleton</span></a> <span class="id" title="tactic">in</span> *.<br/>
<span class="id" title="tactic">assert</span> (<span class="id" title="notation">[</span>φ<span class="id" title="notation">]</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="instance">gmultiset_elements</span> (<span class="id" title="instance">gmultiset_singleton</span> φ)<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>).<br/>
{ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">gmultiset_elements_singleton</span>. <span class="id" title="var">ms</span>. }<br/>
<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span> ; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>φ ; <span class="id" title="var">cbn</span>. <span class="id" title="var">ms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="elem_of_open_boxes" class="idref" href="#elem_of_open_boxes"><span class="id" title="lemma">elem_of_open_boxes</span></a> (<a id="c4390878edbac23354cf8471ab22289e" class="idref" href="#c4390878edbac23354cf8471ab22289e"><span class="id" title="binder">φ</span></a> : <a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a>) <a id="5b241f4e86de6f070abd231dd15c98b2" class="idref" href="#5b241f4e86de6f070abd231dd15c98b2"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="Sequent.Environments.html#c4390878edbac23354cf8471ab22289e"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="Sequent.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">⊗</span></a><a class="idref" href="Sequent.Environments.html#5b241f4e86de6f070abd231dd15c98b2"><span class="id" title="variable">Δ</span></a><span class="id" title="notation">)</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="6ccd94c807aef9340a3e4ddfba7ff597" class="idref" href="#6ccd94c807aef9340a3e4ddfba7ff597"><span class="id" title="binder">ψ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="Sequent.Environments.html#c4390878edbac23354cf8471ab22289e"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Sequent.Environments.html#6ccd94c807aef9340a3e4ddfba7ff597"><span class="id" title="variable">ψ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="notation">(</span><a class="idref" href="Syntax.im_syntax.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a> <a class="idref" href="Sequent.Environments.html#6ccd94c807aef9340a3e4ddfba7ff597"><span class="id" title="variable">ψ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#5b241f4e86de6f070abd231dd15c98b2"><span class="id" title="variable">Δ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">Hin</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">Δ</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">θ</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Hind</span>] <span class="id" title="keyword">using</span> <a class="idref" href="Sequent.Environments.html#gmultiset_rec"><span class="id" title="lemma">gmultiset_rec</span></a>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hin</span>.<br/>
- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Sequent.Environments.html#open_boxes_disj_union"><span class="id" title="lemma">open_boxes_disj_union</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elem_of_disj_union</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hθ</span> | <span class="id" title="var">HΔ</span>].<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">clear</span> <span class="id" title="var">Hind</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Sequent.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hθ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_to_set_disj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hθ</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hθ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">in_map_iff</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hθ</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hθ</span> <span class="id" title="keyword">as</span> (ψ &amp; <span class="id" title="var">H</span> &amp; <span class="id" title="var">H0</span>) ; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">filter_In</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">H</span> &amp; <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> ψ ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span> ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> ψ ; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elem_of_disj_union</span> ; <span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elem_of_elements</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hind</span> <span class="id" title="var">HΔ</span>) <span class="id" title="keyword">as</span> [ψ (<span class="id" title="var">Heq</span> &amp; <span class="id" title="var">HIn</span>)] ; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> ψ ; <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elem_of_disj_union</span> ; <span class="id" title="tactic">right</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="occurs_in_open_boxes" class="idref" href="#occurs_in_open_boxes"><span class="id" title="lemma">occurs_in_open_boxes</span></a> <a id="x:302" class="idref" href="#x:302"><span class="id" title="binder">x</span></a> (<a id="4e9b3a3f53fd670ed9240e1da15f9e8f" class="idref" href="#4e9b3a3f53fd670ed9240e1da15f9e8f"><span class="id" title="binder">φ</span></a> : <a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a>) <a id="93790a734503119889e6e0f988883661" class="idref" href="#93790a734503119889e6e0f988883661"><span class="id" title="binder">Δ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Sequent.syntax_facts.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="Sequent.Environments.html#x:302"><span class="id" title="variable">x</span></a> <a class="idref" href="Sequent.Environments.html#4e9b3a3f53fd670ed9240e1da15f9e8f"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#4e9b3a3f53fd670ed9240e1da15f9e8f"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="Sequent.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">⊗</span></a><a class="idref" href="Sequent.Environments.html#93790a734503119889e6e0f988883661"><span class="id" title="variable">Δ</span></a><span class="id" title="notation">)</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="bcd2c2652a1217f7f9f14fd14248173d" class="idref" href="#bcd2c2652a1217f7f9f14fd14248173d"><span class="id" title="binder">θ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="Sequent.Environments.html#bcd2c2652a1217f7f9f14fd14248173d"><span class="id" title="variable">θ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#93790a734503119889e6e0f988883661"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="Sequent.syntax_facts.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="Sequent.Environments.html#x:302"><span class="id" title="variable">x</span></a> <a class="idref" href="Sequent.Environments.html#bcd2c2652a1217f7f9f14fd14248173d"><span class="id" title="variable">θ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">Hx</span> <span class="id" title="var">H</span>φ. <span class="id" title="tactic">apply</span> <a class="idref" href="Sequent.Environments.html#elem_of_open_boxes"><span class="id" title="lemma">elem_of_open_boxes</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>φ. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>φ <span class="id" title="keyword">as</span> [ψ (<span class="id" title="var">H0</span> &amp; <span class="id" title="var">H1</span>)]; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">exists</span> (<a class="idref" href="Syntax.im_syntax.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a>ψ); <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="occurs_in_map_open_box" class="idref" href="#occurs_in_map_open_box"><span class="id" title="lemma">occurs_in_map_open_box</span></a> <a id="x:306" class="idref" href="#x:306"><span class="id" title="binder">x</span></a> (<a id="cf20e36ac730de2927bb8b7f336c8594" class="idref" href="#cf20e36ac730de2927bb8b7f336c8594"><span class="id" title="binder">φ</span></a> : <a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a>) <a id="2911eeee6a2aa35a739156763185a676" class="idref" href="#2911eeee6a2aa35a739156763185a676"><span class="id" title="binder">Δ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Sequent.syntax_facts.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="Sequent.Environments.html#x:306"><span class="id" title="variable">x</span></a> <a class="idref" href="Sequent.Environments.html#cf20e36ac730de2927bb8b7f336c8594"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#cf20e36ac730de2927bb8b7f336c8594"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Sequent.Environments.html#open_box"><span class="id" title="definition">open_box</span></a> <a class="idref" href="Sequent.Environments.html#2911eeee6a2aa35a739156763185a676"><span class="id" title="variable">Δ</span></a><span class="id" title="notation">)</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="0abf6cc46561fabf82753f8550e991d0" class="idref" href="#0abf6cc46561fabf82753f8550e991d0"><span class="id" title="binder">θ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="Sequent.Environments.html#0abf6cc46561fabf82753f8550e991d0"><span class="id" title="variable">θ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#2911eeee6a2aa35a739156763185a676"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="Sequent.syntax_facts.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="Sequent.Environments.html#x:306"><span class="id" title="variable">x</span></a> <a class="idref" href="Sequent.Environments.html#0abf6cc46561fabf82753f8550e991d0"><span class="id" title="variable">θ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">Hx</span> <span class="id" title="var">H</span>φ. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span>, <span class="id" title="lemma">in_map_iff</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>φ.<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>φ <span class="id" title="keyword">as</span> [ψ [<span class="id" title="var">H</span>φ <span class="id" title="var">Hin</span>]]; <span class="id" title="tactic">subst</span>.<br/>
<span class="id" title="tactic">exists</span> ψ. <span class="id" title="tactic">split</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> ψ; <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="occurs_in_map_l_open_boxes" class="idref" href="#occurs_in_map_l_open_boxes"><span class="id" title="lemma">occurs_in_map_l_open_boxes</span></a> <a id="x:310" class="idref" href="#x:310"><span class="id" title="binder">x</span></a> (<a id="23fea4612b3178595fc4cc9369fe73df" class="idref" href="#23fea4612b3178595fc4cc9369fe73df"><span class="id" title="binder">φ</span></a> : <a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a>) <a id="98e23af1875325753451a976a128b230" class="idref" href="#98e23af1875325753451a976a128b230"><span class="id" title="binder">Δ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Sequent.syntax_facts.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="Sequent.Environments.html#x:310"><span class="id" title="variable">x</span></a> <a class="idref" href="Sequent.Environments.html#23fea4612b3178595fc4cc9369fe73df"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#23fea4612b3178595fc4cc9369fe73df"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="Sequent.Environments.html#l_open_boxes"><span class="id" title="definition">l_open_boxes</span></a> <a class="idref" href="Sequent.Environments.html#98e23af1875325753451a976a128b230"><span class="id" title="variable">Δ</span></a><span class="id" title="notation">)</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="1e6a9c25ee7b56c849ae4b48ed92df67" class="idref" href="#1e6a9c25ee7b56c849ae4b48ed92df67"><span class="id" title="binder">θ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="Sequent.Environments.html#1e6a9c25ee7b56c849ae4b48ed92df67"><span class="id" title="variable">θ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#98e23af1875325753451a976a128b230"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="Sequent.syntax_facts.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="Sequent.Environments.html#x:310"><span class="id" title="variable">x</span></a> <a class="idref" href="Sequent.Environments.html#1e6a9c25ee7b56c849ae4b48ed92df67"><span class="id" title="variable">θ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">Hx</span> <span class="id" title="var">H</span>φ. <span class="id" title="tactic">induction</span> <span class="id" title="var">Δ</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="tactic">try</span> <span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>φ.<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> * ; <span class="id" title="tactic">try</span> <span class="id" title="var">now</span> (<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHΔ</span> <span class="id" title="var">H</span>φ) <span class="id" title="keyword">as</span> (<span class="id" title="var">θ</span> &amp; <span class="id" title="var">H</span> &amp; <span class="id" title="var">H0</span>) ; <span class="id" title="tactic">exists</span> <span class="id" title="var">θ</span> ; <span class="id" title="tactic">split</span> ; [ <span class="id" title="tactic">right</span> ; <span class="id" title="tactic">auto</span> | <span class="id" title="tactic">auto</span>]).<br/>
<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>φ ; <span class="id" title="tactic">subst</span>.<br/>
- <span class="id" title="tactic">eexists</span> ; <span class="id" title="tactic">split</span> ; [ <span class="id" title="tactic">left</span> ; <span class="id" title="tactic">split</span> | <span class="id" title="tactic">auto</span>].<br/>
- <span class="id" title="tactic">exists</span> (<a class="idref" href="Syntax.im_syntax.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a>φ) ; <span class="id" title="tactic">split</span> ; [ <span class="id" title="tactic">right</span> ; <span class="id" title="tactic">auto</span> | <span class="id" title="tactic">auto</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Sequent.Environments.html#l_open_boxes_in"><span class="id" title="lemma">l_open_boxes_in</span></a> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="occurs_in_list_conj" class="idref" href="#occurs_in_list_conj"><span class="id" title="lemma">occurs_in_list_conj</span></a> <a id="x:314" class="idref" href="#x:314"><span class="id" title="binder">x</span></a> <a id="febe64228b6eec779511612e8bee96d9" class="idref" href="#febe64228b6eec779511612e8bee96d9"><span class="id" title="binder">Δ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Sequent.syntax_facts.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="Sequent.Environments.html#x:314"><span class="id" title="variable">x</span></a> (<a class="idref" href="Syntax.im_syntax.html#list_conj"><span class="id" title="definition">list_conj</span></a> <a class="idref" href="Sequent.Environments.html#febe64228b6eec779511612e8bee96d9"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="d2d6248f0f5924f9683aa02de4518a94" class="idref" href="#d2d6248f0f5924f9683aa02de4518a94"><span class="id" title="binder">θ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="Sequent.Environments.html#d2d6248f0f5924f9683aa02de4518a94"><span class="id" title="variable">θ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#febe64228b6eec779511612e8bee96d9"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="Sequent.syntax_facts.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="Sequent.Environments.html#x:314"><span class="id" title="variable">x</span></a> <a class="idref" href="Sequent.Environments.html#d2d6248f0f5924f9683aa02de4518a94"><span class="id" title="variable">θ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">Δ</span> ; <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">intro</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">try</span> <span class="id" title="var">now</span> <span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
- <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span> ; <span class="id" title="tactic">split</span> ; [ <span class="id" title="tactic">left</span> ; <span class="id" title="tactic">split</span> | <span class="id" title="tactic">auto</span>].<br/>
- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHΔ</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">θ</span> &amp; <span class="id" title="var">H0</span> &amp; <span class="id" title="var">H1</span>) ; <span class="id" title="tactic">exists</span> <span class="id" title="var">θ</span> ; <span class="id" title="tactic">split</span> ; [ <span class="id" title="tactic">right</span> ; <span class="id" title="tactic">auto</span> | <span class="id" title="tactic">auto</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="occurs_in_list_disj" class="idref" href="#occurs_in_list_disj"><span class="id" title="lemma">occurs_in_list_disj</span></a> <a id="x:317" class="idref" href="#x:317"><span class="id" title="binder">x</span></a> <a id="c21ffd2649f2155298cda99efc7411c3" class="idref" href="#c21ffd2649f2155298cda99efc7411c3"><span class="id" title="binder">Δ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Sequent.syntax_facts.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="Sequent.Environments.html#x:317"><span class="id" title="variable">x</span></a> (<a class="idref" href="Syntax.im_syntax.html#list_disj"><span class="id" title="definition">list_disj</span></a> <a class="idref" href="Sequent.Environments.html#c21ffd2649f2155298cda99efc7411c3"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="43085de4a6a3e61e303da9de3021aedd" class="idref" href="#43085de4a6a3e61e303da9de3021aedd"><span class="id" title="binder">θ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="Sequent.Environments.html#43085de4a6a3e61e303da9de3021aedd"><span class="id" title="variable">θ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#c21ffd2649f2155298cda99efc7411c3"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="Sequent.syntax_facts.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="Sequent.Environments.html#x:317"><span class="id" title="variable">x</span></a> <a class="idref" href="Sequent.Environments.html#43085de4a6a3e61e303da9de3021aedd"><span class="id" title="variable">θ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">Δ</span> ; <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">intro</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">try</span> <span class="id" title="var">now</span> <span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
- <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span> ; <span class="id" title="tactic">split</span> ; [ <span class="id" title="tactic">left</span> ; <span class="id" title="tactic">split</span> | <span class="id" title="tactic">auto</span>].<br/>
- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHΔ</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">θ</span> &amp; <span class="id" title="var">H0</span> &amp; <span class="id" title="var">H1</span>) ; <span class="id" title="tactic">exists</span> <span class="id" title="var">θ</span> ; <span class="id" title="tactic">split</span> ; [ <span class="id" title="tactic">right</span> ; <span class="id" title="tactic">auto</span> | <span class="id" title="tactic">auto</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="open_boxes_remove_t" class="idref" href="#open_boxes_remove_t"><span class="id" title="lemma">open_boxes_remove_t</span></a> <a id="c0d490cf47be0c191d0ebda99525ce3d" class="idref" href="#c0d490cf47be0c191d0ebda99525ce3d"><span class="id" title="binder">Γ</span></a> <a id="d36385c75e2d169fefd285cb87a96416" class="idref" href="#d36385c75e2d169fefd285cb87a96416"><span class="id" title="binder">φ</span></a> : <a class="idref" href="Sequent.Environments.html#is_box"><span class="id" title="definition">is_box</span></a> <a class="idref" href="Sequent.Environments.html#d36385c75e2d169fefd285cb87a96416"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#d36385c75e2d169fefd285cb87a96416"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#c0d490cf47be0c191d0ebda99525ce3d"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">(≡@{</span><a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span> <span class="id" title="notation">(⊗</span> <span class="id" title="notation">(</span><span class="id" title="notation">Γ</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[φ]}))</span> <span class="id" title="notation">((⊗</span> <span class="id" title="notation">Γ</span><span class="id" title="notation">)</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[⊙</span> <span class="id" title="notation">φ]})</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>φ <span class="id" title="var">Hin</span>.<br/>
&nbsp;<span class="id" title="tactic">pose</span> (<a class="idref" href="Sequent.Environments.html#difference_singleton"><span class="id" title="lemma">difference_singleton</span></a> <span class="id" title="var">Γ</span> φ <span class="id" title="var">Hin</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">e</span> <span class="id" title="tactic">at</span> 2.<br/>
<span class="id" title="tactic">rewrite</span> <a class="idref" href="Sequent.Environments.html#open_boxes_add_t"><span class="id" title="lemma">open_boxes_add_t</span></a> ; <span class="id" title="tactic">auto</span>. <span class="id" title="var">ms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="open_boxes_remove_f" class="idref" href="#open_boxes_remove_f"><span class="id" title="lemma">open_boxes_remove_f</span></a> <a id="1eeb23cdf9e17d0082b12325d70afb88" class="idref" href="#1eeb23cdf9e17d0082b12325d70afb88"><span class="id" title="binder">Γ</span></a> <a id="b2593a107580b17542086229c16ce16d" class="idref" href="#b2593a107580b17542086229c16ce16d"><span class="id" title="binder">φ</span></a> : <a class="idref" href="Sequent.Environments.html#is_box"><span class="id" title="definition">is_box</span></a> <a class="idref" href="Sequent.Environments.html#b2593a107580b17542086229c16ce16d"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#b2593a107580b17542086229c16ce16d"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#1eeb23cdf9e17d0082b12325d70afb88"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">(≡@{</span><a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span> <span class="id" title="notation">(⊗</span> <span class="id" title="notation">(</span><span class="id" title="notation">Γ</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[φ]}))</span> <span class="id" title="notation">(⊗</span> <span class="id" title="notation">Γ</span><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>φ <span class="id" title="var">Hin</span>.<br/>
&nbsp;<span class="id" title="tactic">pose</span> (<a class="idref" href="Sequent.Environments.html#difference_singleton"><span class="id" title="lemma">difference_singleton</span></a> <span class="id" title="var">Γ</span> φ <span class="id" title="var">Hin</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">e</span> <span class="id" title="tactic">at</span> 2.<br/>
<span class="id" title="tactic">rewrite</span> <a class="idref" href="Sequent.Environments.html#open_boxes_add_f"><span class="id" title="lemma">open_boxes_add_f</span></a> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_not_box_open_box" class="idref" href="#is_not_box_open_box"><span class="id" title="lemma">is_not_box_open_box</span></a> <a id="b1752783c5abaf4d6354dde3087fd60a" class="idref" href="#b1752783c5abaf4d6354dde3087fd60a"><span class="id" title="binder">φ</span></a> : <a class="idref" href="Sequent.Environments.html#is_box"><span class="id" title="definition">is_box</span></a> <a class="idref" href="Sequent.Environments.html#b1752783c5abaf4d6354dde3087fd60a"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#324ee050da821ba5ae035c28136d140a"><span class="id" title="notation">⊙</span></a><a class="idref" href="Sequent.Environments.html#b1752783c5abaf4d6354dde3087fd60a"><span class="id" title="variable">φ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Sequent.Environments.html#b1752783c5abaf4d6354dde3087fd60a"><span class="id" title="variable">φ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Sequent.Environments.html#is_box"><span class="id" title="definition">is_box</span></a>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> φ; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intuition</span>. <span class="id" title="tactic">discriminate</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="In_open_boxes_t" class="idref" href="#In_open_boxes_t"><span class="id" title="lemma">In_open_boxes_t</span></a> (<a id="0f70a48d463e6ff14ddc032e51ed9df0" class="idref" href="#0f70a48d463e6ff14ddc032e51ed9df0"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="a3db23aa110fba8372c65d6724d0a2bc" class="idref" href="#a3db23aa110fba8372c65d6724d0a2bc"><span class="id" title="binder">φ</span></a> : <a class="idref" href="Sequent.Environments.html#is_box"><span class="id" title="definition">is_box</span></a> <a class="idref" href="Sequent.Environments.html#a3db23aa110fba8372c65d6724d0a2bc"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#a3db23aa110fba8372c65d6724d0a2bc"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#0f70a48d463e6ff14ddc032e51ed9df0"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#open_box"><span class="id" title="definition">open_box</span></a> <a class="idref" href="Sequent.Environments.html#a3db23aa110fba8372c65d6724d0a2bc"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="Sequent.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> <a class="idref" href="Sequent.Environments.html#0f70a48d463e6ff14ddc032e51ed9df0"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>φ <span class="id" title="var">Hin</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Sequent.Environments.html#difference_singleton"><span class="id" title="lemma">difference_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hin</span>,  <a class="idref" href="Sequent.Environments.html#open_boxes_add_t"><span class="id" title="lemma">open_boxes_add_t</span></a> ; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="Proper_elements" class="idref" href="#Proper_elements"><span class="id" title="instance">Proper_elements</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="notation">(≡)</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="notation">(≡ₚ)</span>) ((<span class="id" title="notation">λ</span> <a id="8ed1a83ac26c1460fed0a5fb655f16c8" class="idref" href="#8ed1a83ac26c1460fed0a5fb655f16c8"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">,</span> <span class="id" title="instance">gmultiset_elements</span> <a class="idref" href="Sequent.Environments.html#8ed1a83ac26c1460fed0a5fb655f16c8"><span class="id" title="variable">Γ</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Heq</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="instance">AntiSymm_instance_0</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elements_submseteq</span>; <span class="id" title="var">ms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="elements_open_boxes" class="idref" href="#elements_open_boxes"><span class="id" title="lemma">elements_open_boxes</span></a> <a id="4fa8406391585bca9b8495d5c28d6e0a" class="idref" href="#4fa8406391585bca9b8495d5c28d6e0a"><span class="id" title="binder">Γ</span></a>: <span class="id" title="definition">elements</span> (<a class="idref" href="Sequent.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Sequent.Environments.html#4fa8406391585bca9b8495d5c28d6e0a"><span class="id" title="variable">Γ</span></a>) <span class="id" title="notation">≡ₚ</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Sequent.Environments.html#open_box"><span class="id" title="definition">open_box</span></a> (<span class="id" title="definition">List.filter</span> <a class="idref" href="Sequent.Environments.html#is_box"><span class="id" title="definition">is_box</span></a> (<span class="id" title="definition">elements</span> <a class="idref" href="Sequent.Environments.html#4fa8406391585bca9b8495d5c28d6e0a"><span class="id" title="variable">Γ</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="Sequent.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a>. <span class="id" title="var">remember</span> (<span class="id" title="definition">elements</span> <span class="id" title="var">Γ</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Γ</span> <span class="id" title="var">Heql</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">a</span> <span class="id" title="var">l</span>].<br/>
- <span class="id" title="var">ms</span>.<br/>
- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="Sequent.Environments.html#is_box"><span class="id" title="definition">is_box</span></a> <span class="id" title="var">a</span>) ; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="lemma">gmultiset_elements_disj_union</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>. <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="lemma">gmultiset_elements_singleton</span>. <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_to_set_disj_env_add" class="idref" href="#list_to_set_disj_env_add"><span class="id" title="lemma">list_to_set_disj_env_add</span></a> <a id="cf1b1b7a161132189bacf27819d5125a" class="idref" href="#cf1b1b7a161132189bacf27819d5125a"><span class="id" title="binder">Δ</span></a> <a id="v:330" class="idref" href="#v:330"><span class="id" title="binder">v</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">(</span></a><span class="id" title="definition">list_to_set_disj</span> <a class="idref" href="Sequent.Environments.html#cf1b1b7a161132189bacf27819d5125a"><span class="id" title="variable">Δ</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a><a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">)</span></a> <a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="Sequent.Environments.html#v:330"><span class="id" title="variable">v</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">≡</span> <span class="id" title="definition">list_to_set_disj</span> (<a class="idref" href="Sequent.Environments.html#v:330"><span class="id" title="variable">v</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="Sequent.Environments.html#cf1b1b7a161132189bacf27819d5125a"><span class="id" title="variable">Δ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_to_set_disj_rm" class="idref" href="#list_to_set_disj_rm"><span class="id" title="lemma">list_to_set_disj_rm</span></a> <a id="fab0546ac3f14821a8b3f38fc51b2e5f" class="idref" href="#fab0546ac3f14821a8b3f38fc51b2e5f"><span class="id" title="binder">Δ</span></a> <a id="v:332" class="idref" href="#v:332"><span class="id" title="binder">v</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="definition">list_to_set_disj</span> <a class="idref" href="Sequent.Environments.html#fab0546ac3f14821a8b3f38fc51b2e5f"><span class="id" title="variable">Δ</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="Sequent.Environments.html#v:332"><span class="id" title="variable">v</span></a><span class="id" title="notation">]}</span> <span class="id" title="notation">≡</span> <span class="id" title="definition">list_to_set_disj</span> (<a class="idref" href="Sequent.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="Sequent.Environments.html#v:332"><span class="id" title="variable">v</span></a> <a class="idref" href="Sequent.Environments.html#fab0546ac3f14821a8b3f38fc51b2e5f"><span class="id" title="variable">Δ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">Δ</span> <span class="id" title="keyword">as</span> [|φ <span class="id" title="var">Δ</span>]; <span class="id" title="tactic">simpl</span>; [<span class="id" title="var">ms</span>|].<br/>
<span class="id" title="tactic">case</span> <a class="idref" href="Sequent.syntax_facts.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a>; <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">subst</span>; [<span class="id" title="var">ms</span>|].<br/>
<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHΔ</span>. <span class="id" title="tactic">case</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">v</span> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><span class="id" title="definition">list_to_set_disj</span> <span class="id" title="var">Δ</span>: <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">)</span>)).<br/>
- <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Sequent.Environments.html#union_difference_R"><span class="id" title="lemma">union_difference_R</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">assumption</span>. <span class="id" title="var">ms</span>.<br/>
- <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Sequent.Environments.html#diff_not_in"><span class="id" title="lemma">diff_not_in</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Sequent.Environments.html#diff_not_in"><span class="id" title="lemma">diff_not_in</span></a>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="gmultiset_elements_list_to_set_disj" class="idref" href="#gmultiset_elements_list_to_set_disj"><span class="id" title="lemma">gmultiset_elements_list_to_set_disj</span></a> (<a id="l:333" class="idref" href="#l:333"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a>):<br/>
&nbsp;&nbsp;<span class="id" title="instance">gmultiset_elements</span>(<span class="id" title="definition">list_to_set_disj</span> <a class="idref" href="Sequent.Environments.html#l:333"><span class="id" title="variable">l</span></a>) <span class="id" title="notation">≡ₚ</span> <a class="idref" href="Sequent.Environments.html#l:333"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">x</span> <span class="id" title="var">l</span>]; [<span class="id" title="var">ms</span>|].<br/>
<span class="id" title="tactic">rewrite</span> <a class="idref" href="Sequent.Environments.html#Proper_elements"><span class="id" title="instance">Proper_elements</span></a>; [|<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="Sequent.Environments.html#list_to_set_disj_env_add"><span class="id" title="lemma">list_to_set_disj_env_add</span></a>].<br/>
<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="Sequent.Environments.html#elements_env_add"><span class="id" title="lemma">elements_env_add</span></a>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>. <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="gmultiset_elements_list_to_set_disj_perm" class="idref" href="#gmultiset_elements_list_to_set_disj_perm"><span class="id" title="lemma">gmultiset_elements_list_to_set_disj_perm</span></a> (<a id="l0:334" class="idref" href="#l0:334"><span class="id" title="binder">l0</span></a> <a id="l1:335" class="idref" href="#l1:335"><span class="id" title="binder">l1</span></a> : <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="Sequent.Environments.html#l0:334"><span class="id" title="variable">l0</span></a> <span class="id" title="notation">≡ₚ</span> <a class="idref" href="Sequent.Environments.html#l1:335"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="instance">gmultiset_elements</span>(<span class="id" title="definition">list_to_set_disj</span> <a class="idref" href="Sequent.Environments.html#l0:334"><span class="id" title="variable">l0</span></a>) <span class="id" title="notation">≡ₚ</span> <a class="idref" href="Sequent.Environments.html#l1:335"><span class="id" title="variable">l1</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">revert</span> <span class="id" title="var">l1</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l0</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">x</span> <span class="id" title="var">l</span>]; [<span class="id" title="var">ms</span>|]. <span class="id" title="tactic">intro</span>.<br/>
<span class="id" title="tactic">rewrite</span> <a class="idref" href="Sequent.Environments.html#Proper_elements"><span class="id" title="instance">Proper_elements</span></a> ; [|<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="Sequent.Environments.html#list_to_set_disj_env_add"><span class="id" title="lemma">list_to_set_disj_env_add</span></a>].<br/>
<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="Sequent.Environments.html#elements_env_add"><span class="id" title="lemma">elements_env_add</span></a> ; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span> ; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_to_set_disj_open_boxes" class="idref" href="#list_to_set_disj_open_boxes"><span class="id" title="lemma">list_to_set_disj_open_boxes</span></a> <a id="b662171991636daa2c2395eb5402b2b1" class="idref" href="#b662171991636daa2c2395eb5402b2b1"><span class="id" title="binder">Δ</span></a>: (<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Sequent.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">(</span></a><span class="id" title="definition">list_to_set_disj</span> <a class="idref" href="Sequent.Environments.html#b662171991636daa2c2395eb5402b2b1"><span class="id" title="variable">Δ</span></a><a class="idref" href="Sequent.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">)</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">list_to_set_disj</span> (<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Sequent.Environments.html#open_box"><span class="id" title="definition">open_box</span></a> (<span class="id" title="definition">List.filter</span> <a class="idref" href="Sequent.Environments.html#is_box"><span class="id" title="definition">is_box</span></a> <a class="idref" href="Sequent.Environments.html#b662171991636daa2c2395eb5402b2b1"><span class="id" title="variable">Δ</span></a>))).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">Δ</span> <span class="id" title="keyword">as</span> [|φ <span class="id" title="var">Δ</span>]; <span class="id" title="tactic">simpl</span>; [<span class="id" title="var">ms</span>|].<br/>
<span class="id" title="tactic">destruct</span> (<a class="idref" href="Sequent.Environments.html#is_box"><span class="id" title="definition">is_box</span></a> φ) <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>.<br/>
- <span class="id" title="tactic">simpl</span> (<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Sequent.Environments.html#open_box"><span class="id" title="definition">open_box</span></a> (φ <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="definition">List.filter</span> <a class="idref" href="Sequent.Environments.html#is_box"><span class="id" title="definition">is_box</span></a> <span class="id" title="var">Δ</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> (<span class="id" title="definition">list_to_set_disj</span> (<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Sequent.Environments.html#324ee050da821ba5ae035c28136d140a"><span class="id" title="notation">⊙</span></a> φ<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Sequent.Environments.html#open_box"><span class="id" title="definition">open_box</span></a> (<span class="id" title="definition">List.filter</span> <a class="idref" href="Sequent.Environments.html#is_box"><span class="id" title="definition">is_box</span></a> <span class="id" title="var">Δ</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Sequent.Environments.html#open_boxes_disj_union"><span class="id" title="lemma">open_boxes_disj_union</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span>  <a class="idref" href="Sequent.Environments.html#open_boxes_singleton_t"><span class="id" title="lemma">open_boxes_singleton_t</span></a> ; <span class="id" title="tactic">auto</span>. <span class="id" title="var">ms</span>.<br/>
- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Sequent.Environments.html#open_boxes_disj_union"><span class="id" title="lemma">open_boxes_disj_union</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span>  <a class="idref" href="Sequent.Environments.html#open_boxes_singleton_f"><span class="id" title="lemma">open_boxes_singleton_f</span></a> ; <span class="id" title="tactic">auto</span>. <span class="id" title="var">ms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="l_open_boxes_perm" class="idref" href="#l_open_boxes_perm"><span class="id" title="lemma">l_open_boxes_perm</span></a> : <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="notation">(≡ₚ@{</span><a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a><span class="id" title="notation">})</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="notation">(≡ₚ@{</span><a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a><span class="id" title="notation">})</span>) <a class="idref" href="Sequent.Environments.html#l_open_boxes"><span class="id" title="definition">l_open_boxes</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">l0</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l0</span>.<br/>
- <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Permutation_nil_l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">subst</span> ; <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="lemma">Permutation_vs_cons_inv</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">y0</span> &amp; <span class="id" title="var">y1</span> &amp; <span class="id" title="var">Hy</span>). <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Sequent.Environments.html#l_open_boxes_app"><span class="id" title="lemma">l_open_boxes_app</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="Sequent.Environments.html#is_box"><span class="id" title="definition">is_box</span></a> <span class="id" title="var">a</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E</span> ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Permutation_cons_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Sequent.Environments.html#l_open_boxes_app"><span class="id" title="lemma">l_open_boxes_app</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl0</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Permutation_cons_app_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> ; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E</span> ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span> ; <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Sequent.Environments.html#l_open_boxes_app"><span class="id" title="lemma">l_open_boxes_app</span></a> ; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHl0</span> ; <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Permutation_cons_app_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rm_perm_inside" class="idref" href="#rm_perm_inside"><span class="id" title="lemma">rm_perm_inside</span></a> <a id="l0:337" class="idref" href="#l0:337"><span class="id" title="binder">l0</span></a> <a id="l1:338" class="idref" href="#l1:338"><span class="id" title="binder">l1</span></a> <a id="49c0d15808f27d937fe3968f65149040" class="idref" href="#49c0d15808f27d937fe3968f65149040"><span class="id" title="binder">ψ</span></a> <a id="902ed2321f1740b850bc459050eeb14c" class="idref" href="#902ed2321f1740b850bc459050eeb14c"><span class="id" title="binder">ϕ</span></a> : <a class="idref" href="Sequent.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="Sequent.Environments.html#49c0d15808f27d937fe3968f65149040"><span class="id" title="variable">ψ</span></a> (<a class="idref" href="Sequent.Environments.html#902ed2321f1740b850bc459050eeb14c"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="Sequent.Environments.html#l0:337"><span class="id" title="variable">l0</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="Sequent.Environments.html#l1:338"><span class="id" title="variable">l1</span></a>) <span class="id" title="notation">≡ₚ</span> <a class="idref" href="Sequent.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="Sequent.Environments.html#49c0d15808f27d937fe3968f65149040"><span class="id" title="variable">ψ</span></a> (<a class="idref" href="Sequent.Environments.html#l0:337"><span class="id" title="variable">l0</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="Sequent.Environments.html#902ed2321f1740b850bc459050eeb14c"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="Sequent.Environments.html#l1:338"><span class="id" title="variable">l1</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">revert</span> <span class="id" title="var">l1</span> ψ <span class="id" title="var">ϕ</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">l0</span> ; <span class="id" title="tactic">intros</span> ; <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="tactic">destruct</span> (<a class="idref" href="Sequent.syntax_facts.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> ψ <span class="id" title="var">ϕ</span>) ; <span class="id" title="tactic">subst</span>.<br/>
- <span class="id" title="tactic">destruct</span> (<a class="idref" href="Sequent.syntax_facts.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> <span class="id" title="var">ϕ</span> <span class="id" title="var">a</span>) ; <span class="id" title="tactic">subst</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Permutation_middle</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHl0</span> ; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="Sequent.syntax_facts.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> <span class="id" title="var">ϕ</span> <span class="id" title="var">ϕ</span>) ; <span class="id" title="tactic">subst</span> ; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">destruct</span> (<a class="idref" href="Sequent.syntax_facts.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> <span class="id" title="var">ϕ</span> <span class="id" title="var">a</span>) ; <span class="id" title="tactic">subst</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="Sequent.syntax_facts.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> ψ <span class="id" title="var">a</span>) ; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span> ; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHl0</span> ; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Sequent.syntax_facts.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> ψ <span class="id" title="var">a</span>) ; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="Sequent.syntax_facts.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> ψ <span class="id" title="var">a</span>) ; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Permutation_middle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHl0</span> ; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="Sequent.syntax_facts.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> ψ <span class="id" title="var">ϕ</span>) ; <span class="id" title="tactic">subst</span> ; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="constructor">perm_swap</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rm_perm" class="idref" href="#rm_perm"><span class="id" title="lemma">rm_perm</span></a> <a id="9baf0ccac3c7fbbe1a37a6216e3b2b41" class="idref" href="#9baf0ccac3c7fbbe1a37a6216e3b2b41"><span class="id" title="binder">ψ</span></a> : <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="notation">(≡ₚ@{</span><a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a><span class="id" title="notation">})</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="notation">(≡ₚ@{</span><a class="idref" href="Syntax.im_syntax.html#form"><span class="id" title="inductive">form</span></a><span class="id" title="notation">})</span>) (<a class="idref" href="Sequent.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="Sequent.Environments.html#9baf0ccac3c7fbbe1a37a6216e3b2b41"><span class="id" title="variable">ψ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">l0</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l0</span>.<br/>
- <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Permutation_nil_l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">subst</span> ; <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="lemma">Permutation_vs_cons_inv</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">y0</span> &amp; <span class="id" title="var">y1</span> &amp; <span class="id" title="var">Hy</span>). <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Permutation_cons_app_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">IHl0</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Sequent.Environments.html#rm_perm_inside"><span class="id" title="lemma">rm_perm_inside</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> ; <span class="id" title="tactic">destruct</span> (<a class="idref" href="Sequent.syntax_facts.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> ψ <span class="id" title="var">a</span>) ; <span class="id" title="tactic">subst</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="elements_setminus" class="idref" href="#elements_setminus"><span class="id" title="lemma">elements_setminus</span></a> (<a id="2e9c4bae4c81d76e256445469d61c88b" class="idref" href="#2e9c4bae4c81d76e256445469d61c88b"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="bb4abea3856a2b4f5301564dfbb55c8c" class="idref" href="#bb4abea3856a2b4f5301564dfbb55c8c"><span class="id" title="binder">ψ</span></a> : <span class="id" title="definition">elements</span> (<a class="idref" href="Sequent.Environments.html#2e9c4bae4c81d76e256445469d61c88b"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="Sequent.Environments.html#bb4abea3856a2b4f5301564dfbb55c8c"><span class="id" title="variable">ψ</span></a><span class="id" title="notation">]}</span>) <span class="id" title="notation">≡ₚ</span> <a class="idref" href="Sequent.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="Sequent.Environments.html#bb4abea3856a2b4f5301564dfbb55c8c"><span class="id" title="variable">ψ</span></a> (<span class="id" title="definition">elements</span> <a class="idref" href="Sequent.Environments.html#2e9c4bae4c81d76e256445469d61c88b"><span class="id" title="variable">Γ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">case</span> (<span class="id" title="definition">decide</span> (ψ <span class="id" title="notation">∈</span> <span class="id" title="var">Γ</span>)) ; <span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>.<br/>
- <span class="id" title="tactic">apply</span> <a class="idref" href="Sequent.Environments.html#difference_singleton"><span class="id" title="lemma">difference_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="definition">elements</span> <span class="id" title="var">Γ</span> <span class="id" title="notation">≡ₚ</span> <span class="id" title="definition">elements</span> (<span class="id" title="var">Γ</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span>ψ<span class="id" title="notation">]}</span> <a class="idref" href="Sequent.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> ψ)) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span> ; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Sequent.Environments.html#rm_perm"><span class="id" title="lemma">rm_perm</span></a> ; [ | <span class="id" title="tactic">exact</span> <span class="id" title="var">H0</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Sequent.Environments.html#rm_perm"><span class="id" title="lemma">rm_perm</span></a> ; [ | <span class="id" title="tactic">apply</span> <a class="idref" href="Sequent.Environments.html#elements_env_add"><span class="id" title="lemma">elements_env_add</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="Sequent.syntax_facts.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> ψ ψ) ; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span> ; <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Sequent.Environments.html#diff_not_in"><span class="id" title="lemma">diff_not_in</span></a> ; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Sequent.Environments.html#rm_notin"><span class="id" title="lemma">rm_notin</span></a> ; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elem_of_elements</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Sequent.Environments.html#Modal"><span class="id" title="section">Modal</span></a>.<br/>

<br/>
<span class="id" title="keyword">Global Hint Resolve</span> <span class="id" title="var">In_open_boxes_t</span> : <span class="id" title="var">proof</span>.<br/>
<span class="id" title="keyword">Global Hint Unfold</span> <a class="idref" href="Sequent.Environments.html#open_box"><span class="id" title="definition">open_box</span></a> : <span class="id" title="var">proof</span>.<br/>
<span class="id" title="keyword">Global Hint Rewrite</span> (@<a class="idref" href="Sequent.Environments.html#open_boxes_empty"><span class="id" title="lemma">open_boxes_empty</span></a>) : <span class="id" title="var">proof</span>.<br/>
<span class="id" title="keyword">Global Hint Rewrite</span> (@<a class="idref" href="Sequent.Environments.html#open_boxes_add_t"><span class="id" title="lemma">open_boxes_add_t</span></a>) : <span class="id" title="var">proof</span>.<br/>
<span class="id" title="keyword">Global Hint Rewrite</span> (@<a class="idref" href="Sequent.Environments.html#open_boxes_add_f"><span class="id" title="lemma">open_boxes_add_f</span></a>) : <span class="id" title="var">proof</span>.<br/>
<span class="id" title="keyword">Global Hint Rewrite</span> (@<a class="idref" href="Sequent.Environments.html#open_boxes_remove_t"><span class="id" title="lemma">open_boxes_remove_t</span></a>) : <span class="id" title="var">proof</span>.<br/>
<span class="id" title="keyword">Global Hint Rewrite</span> (@<a class="idref" href="Sequent.Environments.html#open_boxes_remove_f"><span class="id" title="lemma">open_boxes_remove_f</span></a>) : <span class="id" title="var">proof</span>.<br/>
<span class="id" title="keyword">Global Hint Rewrite</span> (@<a class="idref" href="Sequent.Environments.html#open_boxes_singleton_t"><span class="id" title="lemma">open_boxes_singleton_t</span></a>): <span class="id" title="var">proof</span>.<br/>
<span class="id" title="keyword">Global Hint Rewrite</span> (@<a class="idref" href="Sequent.Environments.html#open_boxes_singleton_f"><span class="id" title="lemma">open_boxes_singleton_f</span></a>): <span class="id" title="var">proof</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="elements_list_to_set_disj" class="idref" href="#elements_list_to_set_disj"><span class="id" title="lemma">elements_list_to_set_disj</span></a> (<a id="a9ed3f62f59098fa7a7be0d7917e1e15" class="idref" href="#a9ed3f62f59098fa7a7be0d7917e1e15"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a>) : <span class="id" title="notation">(≡@{</span><a class="idref" href="Sequent.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span> <span class="id" title="notation">Γ</span> <span class="id" title="notation">(</span><span class="id" title="notation">list_to_set_disj</span> <span class="id" title="notation">(</span><span class="id" title="notation">elements</span> <span class="id" title="notation">Γ</span><span class="id" title="notation">))</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="lemma">gmultiset_wf</span> <span class="id" title="var">Γ</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Γ</span> <span class="id" title="var">_</span> <span class="id" title="var">IH</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Sequent.Environments.html#gmultiset_choose_or_empty"><span class="id" title="lemma">gmultiset_choose_or_empty</span></a> <span class="id" title="var">Γ</span>) <span class="id" title="keyword">as</span> [[φ <span class="id" title="var">H</span>φ]| -&gt;]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">gmultiset_disj_union_difference'</span> φ <span class="id" title="var">Γ</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">etransitivity</span> ; [ | <span class="id" title="tactic">apply</span> <a class="idref" href="Sequent.Environments.html#env_equiv_eq"><span class="id" title="lemma">env_equiv_eq</span></a> ; <span class="id" title="tactic">apply</span> <span class="id" title="instance">list_to_set_disj_perm</span> ; <span class="id" title="tactic">symmetry</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elements_disj_union</span> ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">list_to_set_disj_app</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">IH</span> (<span class="id" title="var">Γ</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[+</span> φ <span class="id" title="notation">+]}</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Sequent.Environments.html#equiv_disj_union_compat_r"><span class="id" title="lemma">equiv_disj_union_compat_r</span></a> ; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">gmultiset_elements_singleton</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">list_to_set_disj_cons</span>. <span class="id" title="var">ms</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">ms</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">pose</span> (<span class="id" title="var">H</span> φ). <span class="id" title="tactic">rewrite</span> <a class="idref" href="Sequent.Environments.html#diff_mult"><span class="id" title="lemma">diff_mult</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Sequent.Environments.html#singleton_mult_in"><span class="id" title="lemma">singleton_mult_in</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">l</span> ; <span class="id" title="tactic">auto</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="lemma">elem_of_multiplicity</span> φ). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">i</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>φ. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rm_add" class="idref" href="#rm_add"><span class="id" title="lemma">rm_add</span></a> <a id="5555876ff6e84fc977aae9dbc224f192" class="idref" href="#5555876ff6e84fc977aae9dbc224f192"><span class="id" title="binder">Γ</span></a> <a id="7faf1beab0f9326158c50bc14a69c0d2" class="idref" href="#7faf1beab0f9326158c50bc14a69c0d2"><span class="id" title="binder">φ</span></a> : <span class="id" title="definition">In</span> <a class="idref" href="Sequent.Environments.html#7faf1beab0f9326158c50bc14a69c0d2"><span class="id" title="variable">φ</span></a> <a class="idref" href="Sequent.Environments.html#5555876ff6e84fc977aae9dbc224f192"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Sequent.Environments.html#5555876ff6e84fc977aae9dbc224f192"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">≡ₚ</span> <a class="idref" href="Sequent.Environments.html#7faf1beab0f9326158c50bc14a69c0d2"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="Sequent.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="Sequent.Environments.html#7faf1beab0f9326158c50bc14a69c0d2"><span class="id" title="variable">φ</span></a> <a class="idref" href="Sequent.Environments.html#5555876ff6e84fc977aae9dbc224f192"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">revert</span> φ. <span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span> ; <span class="id" title="tactic">intros</span> φ <span class="id" title="var">Hin</span> ; [ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hin</span> | ].<br/>
<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hin</span> ; <span class="id" title="tactic">subst</span>.<br/>
- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="Sequent.syntax_facts.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> φ φ) ; [ <span class="id" title="tactic">auto</span> | <span class="id" title="var">exfalso</span> ; <span class="id" title="tactic">auto</span>].<br/>
- <span class="id" title="var">cbn</span> ; <span class="id" title="tactic">destruct</span> (<a class="idref" href="Sequent.syntax_facts.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> φ <span class="id" title="var">a</span>) ; <span class="id" title="tactic">subst</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="constructor">perm_swap</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHΓ</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
